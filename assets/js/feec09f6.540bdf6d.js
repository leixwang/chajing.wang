"use strict";(self.webpackChunkleix_wang_website=self.webpackChunkleix_wang_website||[]).push([[459],{3905:function(e,t,n){n.d(t,{Zo:function(){return o},kt:function(){return s}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var m=a.createContext({}),p=function(e){var t=a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):A(A({},t),e)),n},o=function(e){var t=p(e.components);return a.createElement(m.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,m=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),g=p(n),s=l,k=g["".concat(m,".").concat(s)]||g[s]||u[s]||r;return n?a.createElement(k,A(A({ref:t},o),{},{components:n})):a.createElement(k,A({ref:t},o))}));function s(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,A=new Array(r);A[0]=g;var i={};for(var m in t)hasOwnProperty.call(t,m)&&(i[m]=t[m]);i.originalType=e,i.mdxType="string"==typeof e?e:l,A[1]=i;for(var p=2;p<r;p++)A[p]=n[p];return a.createElement.apply(null,A)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},4427:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return m},metadata:function(){return p},toc:function(){return o},default:function(){return g}});var a=n(7462),l=n(3366),r=(n(7294),n(3905)),A=["components"],i={sidebar_position:2},m="ORM \u6846\u67b6",p={unversionedId:"golang/mysql",id:"golang/mysql",title:"ORM \u6846\u67b6",description:"ORM \u6846\u67b6\u4ecb\u7ecd",source:"@site/docs/01.golang/02.mysql.md",sourceDirName:"01.golang",slug:"/golang/mysql",permalink:"/docs/golang/mysql",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Golang \u8bed\u8a00",permalink:"/docs/golang/"},next:{title:"Redis \u6570\u636e\u5e93",permalink:"/docs/golang/redis"}},o=[{value:"ORM \u6846\u67b6\u4ecb\u7ecd",id:"orm-\u6846\u67b6\u4ecb\u7ecd",children:[],level:2},{value:"\u56de\u987eMySQL",id:"\u56de\u987emysql",children:[],level:2},{value:"gORM \u64cd\u4f5c MySQL \u6570\u636e\u5e93",id:"gorm-\u64cd\u4f5c-mysql-\u6570\u636e\u5e93",children:[{value:"\u521b\u5efa\u8868",id:"\u521b\u5efa\u8868",children:[],level:3},{value:"MySQL \u5305\u7684 init \u65b9\u6cd5",id:"mysql-\u5305\u7684-init-\u65b9\u6cd5",children:[],level:3},{value:"gorm\u7684\u8fde\u63a5\u6c60",id:"gorm\u7684\u8fde\u63a5\u6c60",children:[],level:3}],level:2},{value:"gorm \u63d2\u5165\u6570\u636e",id:"gorm-\u63d2\u5165\u6570\u636e",children:[],level:2},{value:"gorm \u67e5\u8be2\u6570\u636e",id:"gorm-\u67e5\u8be2\u6570\u636e",children:[{value:"\u7b80\u5355\u67e5\u8be2\u65b9\u6cd5\uff1a",id:"\u7b80\u5355\u67e5\u8be2\u65b9\u6cd5",children:[],level:3},{value:"where \u5b50\u53e5\u4f7f\u7528",id:"where-\u5b50\u53e5\u4f7f\u7528",children:[],level:3}],level:2},{value:"gorm \u66f4\u65b0\u6570\u636e",id:"gorm-\u66f4\u65b0\u6570\u636e",children:[{value:"save",id:"save",children:[],level:3},{value:"update",id:"update",children:[],level:3},{value:"updates",id:"updates",children:[],level:3}],level:2},{value:"grom \u5220\u9664\u6570\u636e",id:"grom-\u5220\u9664\u6570\u636e",children:[{value:"\u5220\u9664",id:"\u5220\u9664",children:[],level:3},{value:"\u8f6f\u5220\u9664",id:"\u8f6f\u5220\u9664",children:[],level:3},{value:"MySQL 8\u5c0f\u65f6 \u65f6\u533a\u95ee\u9898",id:"mysql-8\u5c0f\u65f6-\u65f6\u533a\u95ee\u9898",children:[],level:3}],level:2},{value:"\u4fee\u6539\u8868\u5b57\u6bb5\u5927\u5c0f",id:"\u4fee\u6539\u8868\u5b57\u6bb5\u5927\u5c0f",children:[],level:2},{value:"\u8bbe\u7f6e\u65f6\u95f4",id:"\u8bbe\u7f6e\u65f6\u95f4",children:[],level:2},{value:"gORM \u8fde\u63a5\u6570\u636e\u5e93",id:"gorm-\u8fde\u63a5\u6570\u636e\u5e93",children:[],level:2}],u={toc:o};function g(e){var t=e.components,i=(0,l.Z)(e,A);return(0,r.kt)("wrapper",(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"orm-\u6846\u67b6"},"ORM \u6846\u67b6"),(0,r.kt)("h2",{id:"orm-\u6846\u67b6\u4ecb\u7ecd"},"ORM \u6846\u67b6\u4ecb\u7ecd"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ORM\uff1aObject  Relational   Mapping  \u2014\u2014 \u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1582249051388",src:n(125).Z})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f5c\u7528\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u64cd\u4f5c\u7ed3\u6784\u4f53\u5bf9\u8c61\uff0c\u6765\u8fbe\u5230\u64cd\u4f5c\u6570\u636e\u5e93\u8868\u7684\u76ee\u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u7ed3\u6784\u4f53\u5bf9\u8c61\uff0c\u6765\u751f\u6210\u6570\u636e\u5e93\u8868\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f18\u70b9\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"SQL\u6709\u53ef\u80fd \u6bd4\u8f83\u590d\u6742\u3002\uff08Oracle --- \u5b50\u67e5\u8be2 -- \u5d4c\u5957\uff09ORM \u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u4e0d\u9700\u8981\u4f7f\u7528 SQL"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u540c\u5f00\u53d1\u8005\uff0c\u4e66\u5199\u7684 SQL \u8bed\u53e5\u6267\u884c\u6548\u7387\u4e0d\u540c\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"go\u8bed\u8a00\u652f\u6301\u7684 ORM\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"gORM\uff1a",(0,r.kt)("a",{parentName:"li",href:"http://gorm.book.jasperxu.com/"},"http://gorm.book.jasperxu.com/")),(0,r.kt)("li",{parentName:"ul"},"xORM\uff1a")))),(0,r.kt)("h1",{id:"gorm-\u8fde\u63a5\u6570\u636e\u5e93\u5efa\u8868"},"gorm \u8fde\u63a5\u6570\u636e\u5e93\u3001\u5efa\u8868"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"grom \u64cd\u4f5c\u7684\u90fd\u662f\u8868\u3001\u8868\u6570\u636e\u3002\u2014\u2014 \u4e0d\u80fd\u64cd\u4f5c\u6570\u636e\u5e93\uff01\u4f7f\u7528SQL\u914d\u5408\u5b8c\u6210\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"create database \u5e93\u540d charset=utf8;\n")))),(0,r.kt)("h2",{id:"\u56de\u987emysql"},"\u56de\u987eMySQL"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u786e\u8ba4mysql\u670d\u52a1\uff0c\u542f\u52a8\uff1a",(0,r.kt)("inlineCode",{parentName:"li"}," ps xua | grep mysql")),(0,r.kt)("li",{parentName:"ol"},"\u8fde\u63a5MySQL\u6570\u636e\u5e93\uff1a mysql -uroot -p123456"),(0,r.kt)("li",{parentName:"ol"},"\u67e5\u770b\u6570\u636e\u5e93\uff1ashow databases;"),(0,r.kt)("li",{parentName:"ol"},"\u5220\u9664\u6570\u636e\u5e93\uff1adrop database t1;    t1 \u4ee3\u8868\u5e93\u540d\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u9009\u62e9\u6570\u636e\u5e93\u3001\u67e5\u770b\u8868\uff1ause \u6570\u636e\u5e93\u540d\uff1b     show tables\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u6570\u636e\u5e93\uff1a create database test charset=utf8;")),(0,r.kt)("h2",{id:"gorm-\u64cd\u4f5c-mysql-\u6570\u636e\u5e93"},"gORM \u64cd\u4f5c MySQL \u6570\u636e\u5e93"),(0,r.kt)("h3",{id:"\u521b\u5efa\u8868"},"\u521b\u5efa\u8868"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u8fde\u63a5\u6570\u636e\u5e93"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'import (\n    "github.com/jinzhu/gorm"\n    _ "github.com/go-sql-driver/mysql"   //"_" \u4ee3\u7801\u4e0d\u76f4\u63a5\u4f7f\u7528\u5305, \u5e95\u5c42\u94fe\u63a5\u8981\u4f7f\u7528!\n    "fmt"\n)\n// mysql: \u6570\u636e\u5e93\u7684\u9a71\u52a8\u540d\n// \u94fe\u63a5\u6570\u636e\u5e93 --\u683c\u5f0f: \u7528\u6237\u540d:\u5bc6\u7801@\u534f\u8bae(IP:port)/\u6570\u636e\u5e93\u540d\uff1fxxx&yyy&\nconn, err := gorm.Open("mysql", "root:123456@tcp(127.0.0.1:3306)/test")\nif err != nil {\n    fmt.Println("gorm.Open err:",err)\n    return\n}\ndefer conn.Close()\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u6570\u636e\u5e93\u8868\u3002 \u2014\u2014\u4e0d\u80fd\u4f7f\u7528gorm\u521b\u5efa\u6570\u636e\u5e93\u3002  \u63d0\u524d\u4f7f\u7528 SQL\u8bed\u53e5\uff0c\u521b\u5efa\u597d\u60f3\u8981\u7684\u6570\u636e\u5e93\u3002"),(0,r.kt)("p",{parentName:"li"},"AutoMigrate()  \u521b\u5efa\u8868\u3002\u9ed8\u8ba4\u521b\u5efa\u7684\u8868 \u4e3a \u590d\u6570\u7c7b\u578b\u3002\u2014\u2014 \u81ea\u52a8\u6dfb\u52a0 \u201cs\u201d "),(0,r.kt)("p",{parentName:"li"},"\u5728\u521b\u5efa\u4e4b\u524d\uff0c \u6dfb\u52a0 ",(0,r.kt)("inlineCode",{parentName:"p"},"\tconn.SingularTable(true)")," \u53ef\u4ee5\u521b\u5efa\u975e\u590d\u6570\u8868\u540d\u7684\u8868\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"// \u4e0d\u8981\u590d\u6570\u8868\u540d\nconn.SingularTable(true)\n\n// \u501f\u52a9 gorm \u521b\u5efa\u6570\u636e\u5e93\u8868.\nfmt.Println(conn.AutoMigrate(new(Student)).Error)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u67e5\u770b"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql> desc student;\n+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| name  | varchar(255) | YES  |     | NULL    |                |\n| age   | int(11)      | YES  |     | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\n\n")))),(0,r.kt)("h3",{id:"mysql-\u5305\u7684-init-\u65b9\u6cd5"},"MySQL \u5305\u7684 init \u65b9\u6cd5"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},'_ "github.com/go-sql-driver/mysql"')," \u5bfc\u5165\u5305\u65f6\uff0c \u201c_\u201d ,\u8868\u793a\uff0c\u9a71\u4f7fgo\u7cfb\u7edf\uff0c\u5728main() \u51fd\u6570\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u81ea\u52a8\u8c03\u7528 init() \u51fd\u6570\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"go\u8bed\u8a00\u4e2d\u6709\u4e24\u4e2a\u7279\u6b8a\u51fd\u6570\uff1a  \u2014\u2014 \u9996\u5b57\u6bcd\u5c0f\u5199\uff0c\u5305\u5916\u53ef\u89c1 \u3002"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"main()   \u2014\u2014 \u9879\u76ee\u7684\u5165\u53e3\u51fd\u6570 "),(0,r.kt)("li",{parentName:"ol"},"init() \u2014\u2014 \u5f53\u5bfc\u5305\uff0c\u4f46\u6ca1\u6709\u5728\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u3002 \u5728main() \u8c03\u7528\u4e4b\u524d\uff0c\u81ea\u52a8\u88ab\u8c03\u7528\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u67e5\u770b\uff1a\u5149\u6807\u7f6e\u4e8e MySQL\u5305\u7684 \u201cmysql\u201d \u4e0a\u3002 \u4f7f\u7528 Ctrl-\u9f20\u6807\u5de6\u952e\u3002 \u770b\u5230\u6e90\u7801\u3002 \u5728 driver.go \u5e95\u90e8\u5305\u542b init() \u51fd\u6570\u7684 \u5b9a\u4e49\u3002"),(0,r.kt)("li",{parentName:"ul"},"init() \u4f5c\u7528\uff1a\u5b9e\u73b0\u6ce8\u518c MySQL \u9a71\u52a8\u3002"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6d4b\u8bd5\uff1a"),(0,r.kt)("p",{parentName:"li"},"test2/ \u4e2d"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'--- \u521b\u5efa test2/ \u76ee\u5f55\uff0c \u5728\u5185\u90e8\u6dfb\u52a0 init()\n\npackage test2\n\nimport "fmt"\n// \u9996\u5b57\u6bcd\u5c0f\u5199\u51fd\u6570, \u5305\u4f5c\u7528\u57df, \u4e0d\u80fd\u8de8\u5305\u4f7f\u7528!\nfunc init()  {\n    fmt.Println("\u6d4b\u8bd5 init \u51fd\u6570 ....")\n}\n')),(0,r.kt)("p",{parentName:"li"},"test/ \u4e2d"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'import (\n    "github.com/jinzhu/gorm"\n    _ "bj38web/web/test2"   //"_" \u4ee3\u7801\u4e0d\u76f4\u63a5\u4f7f\u7528\u5305, \u5e95\u5c42\u94fe\u63a5\u8981\u4f7f\u7528!\n    "fmt"\n)\nfunc main()  {\n    fmt.Println("----this is main ---")\n}\n\u8f93\u51fa\uff1a \u6d4b\u8bd5 init \u51fd\u6570 ....\n\u518d\u8f93\u51fa\uff1a----this is main ---\n')))),(0,r.kt)("p",null,"\u8fd0\u884c\u7ed3\u679c\uff1a init \u51fd\u6570 \u4f1a\u5148\u4e8e main() \u51fd\u6570\u88ab\u8c03\u7528\uff01\uff01\uff01"),(0,r.kt)("h3",{id:"gorm\u7684\u8fde\u63a5\u6c60"},"gorm\u7684\u8fde\u63a5\u6c60"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'-- \u9ed8\u8ba4\uff0c grom\u6846\u67b6\u521b\u5efa\u597d\u7684MySQL\u6570\u636e\u5e93\u8fde\u63a5 conn \uff0c\u5c31\u662f\u4e00\u4e2a\u8fde\u63a5\u6c60\u7684\u53e5\u67c4\u3002\nconn, err := gorm.Open("mysql", "root:123456@tcp(127.0.0.1:3306)/test")\n\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\uff0c \u63a5\u6536\u53e5\u67c4"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"// \u521b\u5efa\u5168\u5c40\u8fde\u63a5\u6c60\u53e5\u67c4\nvar GlobalConn *gorm.DB\n\nGlobalConn = conn\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4fee\u6539\u8fde\u63a5\u6c60\u521d\u59cb\u5c5e\u6027"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"// \u521d\u59cb\u6570\nGlobalConn.DB().SetMaxIdleConns(10)\n// \u6700\u5927\u6570\nGlobalConn.DB().SetMaxOpenConns(100)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528\u8fde\u63a5\u6c60\u53e5\u67c4"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"--- \u5bf9\u6bd4redis\u8fde\u63a5\u6c60\uff1a\u4e0d\u9700\u8981\u4f7f\u7528 Get() \u65b9\u6cd5\uff0c\u53d6\u4e00\u6761\u8fde\u63a5\u3002\n// \u4e0d\u8981\u590d\u6570\u8868\u540d\nGlobalConn.SingularTable(true)\n\n// \u501f\u52a9 gorm \u521b\u5efa\u6570\u636e\u5e93\u8868.\nfmt.Println(GlobalConn.AutoMigrate(new(Student)).Error)\n")))),(0,r.kt)("h1",{id:"gorm-\u64cd\u4f5c\u6570\u636e\u5e93\u6570\u636e"},"gorm \u64cd\u4f5c\u6570\u636e\u5e93\u6570\u636e"),(0,r.kt)("h2",{id:"gorm-\u63d2\u5165\u6570\u636e"},"gorm \u63d2\u5165\u6570\u636e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},"// insert into student(name, age) values('zhangsan', 100)\n\nfunc InsertData()  {\n    // \u5148\u521b\u5efa\u6570\u636e --- \u521b\u5efa\u5bf9\u8c61\n    var stu Student\n    stu.Name = \"zhangsan\"\n    stu.Age = 100\n\n    // \u63d2\u5165(\u521b\u5efa)\u6570\u636e\n    fmt.Println(GlobalConn.Create(&stu).Error)\n}\n")),(0,r.kt)("p",null,"\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u63d2\u5165\u6570\u636e\u65f6\uff0c\u4f7f\u7528\u7684 create() \u51fd\u6570\uff0c\u4f20\u53c2\u65f6\uff0c\u5fc5\u987b\u4f20\u5165 &\u5bf9\u8c61\u3002 \u5982\u679c\u9057\u6f0f \u201c&\u201d \u4f1a\u62a5\u9519\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1582255572530",src:n(3491).Z})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8981\u4fdd\u8bc1 \uff0c\u5728\u63d2\u5165\u6570\u636e\u5e93\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"GlobalConn.SingularTable(true)")," \u751f\u6548\u3002\u4ee3\u8868\u4e0d\u4f7f\u7528 \u590d\u6570\u8868\u540d\u3002")),(0,r.kt)("h2",{id:"gorm-\u67e5\u8be2\u6570\u636e"},"gorm \u67e5\u8be2\u6570\u636e"),(0,r.kt)("h3",{id:"\u7b80\u5355\u67e5\u8be2\u65b9\u6cd5"},"\u7b80\u5355\u67e5\u8be2\u65b9\u6cd5\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"First(&suer):"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u83b7\u53d6 user \u8868\u4e2d\u7684\u7b2c\u4e00\u6761\u6570\u636e"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"func SearchData()  {\n    var stu Student\n    GlobalConn.First(&stu)\n    fmt.Println(stu)\n}\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u76f8\u5f53\u4e8eSQL\uff1a",(0,r.kt)("inlineCode",{parentName:"p"}," SELECT * FROM student ORDER BY id LIMIT 1;"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53ea\u67e5\u8be2 name\u3001age \u4e0d\u67e5\u8be2\u5176\u4ed6\u503c\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'GlobalConn.Select("name, age").First(&stu)\n'))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Last(&user)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u83b7\u53d6 user \u8868\u4e2d\u7684\u6700\u540e\u4e00\u6761\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"\u76f8\u5f53\u4e8eSQL\uff1a",(0,r.kt)("inlineCode",{parentName:"li"}," SELECT * FROM users ORDER BY id DESC LIMIT 1")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Find(&user)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u83b7\u53d6 user \u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'var stu []Student       // \u6539\u4e3a\u5207\u7247\nGlobalConn.Select("name, age").Find(&stu)   // Find() \u67e5\u8be2\u591a\u6761\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u76f8\u5f53\u4e8eSQL\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"select name, age from student;")))))),(0,r.kt)("h3",{id:"where-\u5b50\u53e5\u4f7f\u7528"},"where \u5b50\u53e5\u4f7f\u7528"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"select name, age from student where name = \u2018lisi\u2019;"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'GlobalConn.Select("name, age").Where("name = ?", "lisi").Find(&stu)\n\u6216\uff1a\nGlobalConn.Where("name = ?", "lisi").Select("name, age").Find(&stu)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"select name, age from student where name = \u2018lisi\u2019 and age = 22; "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'//\u65b9\u6cd51\uff1a\nGlobalConn.Select("name, age").Where("name = ?", "lisi").\n            Where("age = ?", 22).Find(&stu)\n//\u65b9\u6cd52\uff1a\nGlobalConn.Select("name, age").Where("name = ? and age = ?", "lisi", 22).Find(&stu)\n')))),(0,r.kt)("h2",{id:"gorm-\u66f4\u65b0\u6570\u636e"},"gorm \u66f4\u65b0\u6570\u636e"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Save(): \u6839\u636e\u4e3b\u952e\u66f4\u65b0\u3002 \u5982\u679c\u6570\u636e\u6ca1\u6709\u6307\u5b9a\u4e3b\u952e\uff0c\u4e0d\u66f4\u65b0 \uff0c\u53d8\u4e3a \u201c\u63d2\u5165\u201d\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ol"},"Update(): \u66f4\u65b0\u4e00\u4e2a\u5b57\u6bb5\u3002"),(0,r.kt)("li",{parentName:"ol"},"Updates(): \u66f4\u65b0\u591a\u4e2a\u5b57\u6bb5\u3002")),(0,r.kt)("h3",{id:"save"},"save"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63d2\u5165\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'  func UpdateData()  {\n    var stu Student\n    stu.Name = "wangwu"\n    stu.Age = 99            // \u6ca1\u6709\u6307\u5b9a id -- \u6ca1\u6709\u4e3b\u952e! --- \u63d2\u5165\n    fmt.Println(GlobalConn.Save(&stu).Error)\n  }\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"select * from student;"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql> select * from student;\n+----+----------+------+\n| id | name     | age  |\n+----+----------+------+\n|  1 | zhangsan |  100 |\n|  2 | lisi     |   18 |\n|  3 | lisi     |   18 |\n|  4 | lisi     |   18 |\n|  5 | lisi     |   18 |\n|  6 | lisi     |   22 |\n|  7 | wangwu   |   99 |\n+----+----------+------+\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u66f4\u65b0\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'  func UpdateData()  {\n    var stu Student\n    stu.Name = "wangwu"\n    stu.Age = 77\n    stu.Id = 4          //\u6307\u5b9a id -- \u66f4\u65b0\u64cd\u4f5c!\n    fmt.Println(GlobalConn.Save(&stu).Error)\n  }\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u67e5\u8be2\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql> select * from student;\n+----+----------+------+\n| id | name     | age  |\n+----+----------+------+\n|  1 | zhangsan |  100 |\n|  2 | lisi     |   18 |\n|  3 | lisi     |   18 |\n|  4 | wangwu   |   77 |\n|  5 | lisi     |   18 |\n|  6 | lisi     |   22 |\n|  7 | wangwu   |   99 |\n+----+----------+------+\n7 rows in set (0.01 sec)\n")))))),(0,r.kt)("h3",{id:"update"},"update"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'fmt.Println(GlobalConn.Model(new(Student)).Where("name = ?", "zhaoliu").\n            Update("name", "lisi").Error)\n\nModel(new(Student): \u6307\u5b9a\u66f4\u65b0 \u201cstudent\u201d \u8868\nWhere("name = ?", "zhaoliu")\uff1a \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 \nUpdate("name", "lisi").Error)\uff1a\u6307\u5b9a \u628a \u201czhaoliu\u201d \u66f4\u65b0\u6210 \u201clisi\u201d    \n')),(0,r.kt)("h3",{id:"updates"},"updates"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'fmt.Println(GlobalConn.Model(new(Student)).Where("name = ?", "lisi").\n            Updates(map[string]interface{}{"name":"liuqi", "age":77}).Error)\n')),(0,r.kt)("h2",{id:"grom-\u5220\u9664\u6570\u636e"},"grom \u5220\u9664\u6570\u636e"),(0,r.kt)("h3",{id:"\u5220\u9664"},"\u5220\u9664"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7269\u7406\u5220\u9664\u3002\u771f\u6b63\u7684\u6267\u884c Delete\u3002")),(0,r.kt)("h3",{id:"\u8f6f\u5220\u9664"},"\u8f6f\u5220\u9664"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u903b\u8f91\u5220\u9664\u3002\u4e0d\u771f\u6b63\u5220\u3002\u4e0d\u6267\u884cDelete\u3002 \u2014\u2014 \u6570\u636e\u65e0\u4ef7\u7684\uff01"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u521b\u5efa\u8868\u65f6\uff0c\u5728\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a \u201c\u5220\u9664\u5b57\u6bb5\u201d \u3002\u5f53\u9700\u8981\u5220\u9664\u65f6\uff0c\u66f4\u65b0 \u201c\u5220\u9664\u5b57\u6bb5\u201d\uff0c \u66f4\u65b0\u4e3a \uff1atrue"),(0,r.kt)("li",{parentName:"ul"},"\u67e5\u8be2\u65f6\uff0c\u4e0d\u67e5\u8be2 \u201c\u5220\u9664\u5b57\u6bb5\u201d \u4e3a null \u7684\u503c\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4e3e\u4f8b\uff1a\u6dd8\u5b9d\uff0c\u5220\u9664\u8ba2\u5355\u3002 \u624b\u673a\uff0c\u5220\u9664\u56fe\u7247\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5b9e\u73b0 \u8f6f\u5220\u9664\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u8868\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// \u521b\u5efa\u5168\u5c40\u7ed3\u6784\u4f53\ntype Student struct {\n    gorm.Model      // go\u8bed\u8a00\u4e2d, \u533f\u540d\u6210\u5458 --- \u7ee7\u627f! Student \u7ee7\u627f Model\n    Name string\n    Age int\n}\n--- \u5728 \u201cModel\u201d \u4e0a\uff0cCtrl-B \u8df3\u8f6c\u81f3 Model \u7c7b\u5b9a\u4e49\u3002\ntype Model struct {\n    ID        uint `gorm:"primary_key"`\n    CreatedAt time.Time\n    UpdatedAt time.Time\n    DeletedAt *time.Time `sql:"index"`\n}\n--- Model \u8868\u7531 mysql\u81ea\u52a8\u7ef4\u62a4\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u624b\u52a8\u7ef4\u62a4\u3002\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6267\u884c\u8f6f\u5220\u9664\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'--- \u4f7f\u7528 Delete() \u53c2\u6570\uff0c\u6307\u5b9a\u8981\u5220\u9664\u7684\u6570\u636e\u6240\u5728\u8868\u7684\u8868\u540d\u3002\nfmt.Println(GlobalConn.Where("name = ?", "lisi").Delete(new(Student)).Error)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9a8c\u8bc1\uff1a"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"select * from student\uff1b  \u4f9d\u7136\u80fd\u770b\u5230 \u201clisi\u201d \u76f8\u5173\u6570\u636e\u3002 \u4f46\u662f \u3002delete_at \u5b57\u6bb5\u3002\u88ab\u586b\u5165\u6570\u636e\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5728 gorm \u6846\u67b6\u4e2d\uff0c\u6267\u884c \u67e5\u8be2\u8bed\u53e5\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'func SearchData()  {\n    var stu []Student\n    GlobalConn.Find(&stu)\n    fmt.Println(stu)\n}\n--- \u67e5\u8be2\u7ed3\u679c\u4e3a\uff1a [ ]  ---- "\u8f6f\u5220\u9664" \u6210\u529f\uff01\n'))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u60f3 \u67e5\u8be2 \u201c\u8f6f\u5220\u9664\u201d\u7684\u6570\u636e\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"GlobalConn.Unscoped().Find(&stu)\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u60f3 \u5b9e\u73b0 \u201c\u7269\u7406\u5220\u9664\u201d"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'--- \u501f\u52a9 Unscoped() \u6267\u884c\u5220\u9664\u3002\nGlobalConn.Unscoped().Where("name = ?", "lisi").Delete(new(Student))\n')))))),(0,r.kt)("h3",{id:"mysql-8\u5c0f\u65f6-\u65f6\u533a\u95ee\u9898"},"MySQL 8\u5c0f\u65f6 \u65f6\u533a\u95ee\u9898"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"MySQL\u9ed8\u8ba4\u4f7f\u7528\u7684\u65f6\u95f4 \uff1a \u7f8e\u56fd \u4e1c 8 \u533a \u65f6\u95f4 \u3002 \u2014\u2014 \u5317\u4eac\u65f6\u95f4 \u2014\u2014 \u5dee 8 \u5c0f\u65f6\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5728\u8fde\u63a5\u6570\u636e\u5e93\u65f6\uff0c\u6dfb\u52a0\u5c5e\u6027\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"?parseTime=True&loc=Local")," "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'conn, err := gorm.Open("mysql,                "root:123456@tcp(127.0.0.1:3306)/test?parseTime=True&loc=Local")\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u518d\u6267\u884cSQL\u8bed\u53e5\u3001gorm\u8bbf\u95eeMySQL \u4f7f\u7528 \u5317\u4eac\u65f6\u95f4\u3002"))),(0,r.kt)("h1",{id:"gorm-\u8bbe\u7f6e\u8868\u5c5e\u6027"},"gorm \u8bbe\u7f6e\u8868\u5c5e\u6027"),(0,r.kt)("h2",{id:"\u4fee\u6539\u8868\u5b57\u6bb5\u5927\u5c0f"},"\u4fee\u6539\u8868\u5b57\u6bb5\u5927\u5c0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// \u521b\u5efa\u5168\u5c40\u7ed3\u6784\u4f53\ntype Student struct {\n    Id int\n    Name string     `gorm:"size:50"`    \n    // string -- varchar\u3002 \u9ed8\u8ba4\u5927\u5c0f255.  \u53ef\u4ee5\u5728\u521b\u5efa\u8868\u65f6\uff0c\u6307\u5b9a\u5927\u5c0f\u3002\n    Age int\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7ed3\u8bba\uff1a\u4fee\u6539\u8868\u5c5e\u6027\uff0c\u53ea\u80fd\u5728\u7b2c\u4e00\u6b21\u5efa\u8868\u7684\u65f6\u5019\uff0c\u6709\u6548\uff01\u6216\u8005\u7ed9\u8868\u589e\u52a0\u65b0\u5b57\u6bb5\u7684\u65f6\u5019\uff0c\u6709\u6548\uff01\u5176\u4ed6\u573a\u666f\uff0c\u4fee\u6539\u8868\u5c5e\u6027 \uff0c\u5728 gorm \u64cd\u4f5c\u4e2d\uff0c\u65e0\u6548\uff01")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// \u521b\u5efa\u5168\u5c40\u7ed3\u6784\u4f53\ntype Student struct {\n    Id    int\n    Name  string `gorm:"size:100;default:\'xiaoming\'"`\n    Age   int\n    Class int    `gorm:"not null"`\n}\n')),(0,r.kt)("h2",{id:"\u8bbe\u7f6e\u65f6\u95f4"},"\u8bbe\u7f6e\u65f6\u95f4"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4MySQL\u6570\u636e\u5e93 \u6709 3 \u79cd\u65f6\u95f4\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"date\uff1a"),(0,r.kt)("li",{parentName:"ul"},"datetime\uff1a"),(0,r.kt)("li",{parentName:"ul"},"timeStamp\uff1a\u65f6\u95f4\u6233\u3002 \u2014\u2014  gorm \u4e2d\uff0c\u53ea\u6709 timeStamp"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u5fc5\u987b\u4f7f\u7528 MySQL \u6570\u636e\u5e93\u7279\u6709\u7684 \u201c\u6570\u636e\u7c7b\u578b\u201d\uff0c \u4f7f\u7528 \u201ctype\u201d \u5173\u952e\u5b57\u6765\u8bbe\u7f6e\u3002"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// \u521b\u5efa\u5168\u5c40\u7ed3\u6784\u4f53\ntype Student struct {\n    Id    int\n    Name  string    `gorm:"size:100;default:\'xiaoming\'"`\n    Age   int\n    Class int       `gorm:"not null"`\n    Join  time.Time `gorm:"type:timestamp"`// \u521b\u5efa Student \u8868\u6307\u5b9a timestamp\u7c7b\u578b\u3002\n}\n')),(0,r.kt)("h1",{id:"\u9879\u76ee\u4e2d\u4f7f\u7528\u8868-\u7684\u521b\u5efa"},"\u9879\u76ee\u4e2d\u4f7f\u7528\u8868 \u7684\u521b\u5efa"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5728 \u9879\u76ee\u7684 web/model/ \u4e0b \u521b\u5efa  model.go \u6587\u4ef6\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u53c2\u7167\u8bb2\u4e49\u300a\u5fae\u670d\u52a1\u9879\u76ee\u8bb2\u4e491.md\u300b\u4e2d 2.2.2 \u5c0f\u8282\uff0c\u5c06\u521b\u5efa\u8868\u7684\u4ee3\u7801 \u6dfb\u52a0\u5230  model.go \u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528 SQL\u8bed\u53e5\u521b\u5efa \u6570\u636e\u5e93 search_house\u3002\u4fee\u6539 InitDb() \u51fd\u6570\u3002\u540c\u65f6\uff0c\u6307\u5b9aMySQL\u4f7f\u7528\u7684\u65f6\u95f4\u3002\u521d\u59cb\u5316\u5168\u5c40\u8fde\u63a5\u6c60\u53e5\u67c4\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// \u521b\u5efa \u6570\u636e\u5e93\u94fe\u63a5\u53e5\u67c4\nvar GlobalConn *gorm.DB\n\nfunc InitDb() (*gorm.DB, error) {\n    db, err := gorm.Open("mysql",\n"root:123456@tcp(127.0.0.1:3306)/search_house?parseTime=True&loc=Local")\n\n    if err == nil {\n        // \u521d\u59cb\u5316 \u5168\u5c40\u8fde\u63a5\u6c60\u53e5\u67c4\n        GlobalConn = db\n        GlobalConn.DB().SetMaxIdleConns(10)\n        GlobalConn.DB().SetConnMaxLifetime(100)\n\n        db.SingularTable(true)\n        db.AutoMigrate(new(User), new(House), new(Area), new(Facility), new(HouseImage), new(OrderHouse))\n        return db, nil\n    }\n    return nil, err\n}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5c06  InitDb()  \u5728 web/main.go \u4e2d \u8c03\u7528\uff01"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},"// \u521d\u59cb\u5316 MySQL \u94fe\u63a5\u6c60\nmodel.InitDb()\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u8fd0\u884c web/main.go , \u521b\u5efa \u9879\u76ee\u4e2d\u9700\u8981\u4f7f\u7528\u7684\u8868"))),(0,r.kt)("h2",{id:"gorm-\u8fde\u63a5\u6570\u636e\u5e93"},"gORM \u8fde\u63a5\u6570\u636e\u5e93"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6570\u636e\u7c7b\u578b"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"username"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"password"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"gender"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"birthday"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"register_time"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"last_login_time"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"last_login_ip"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"user_level_id"),(0,r.kt)("td",{parentName:"tr",align:null},"int")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nickname"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mobile"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"register_ip"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avatar"),(0,r.kt)("td",{parentName:"tr",align:null},"char")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"weixin_openid"),(0,r.kt)("td",{parentName:"tr",align:null},"char")))))}g.isMDXComponent=!0},125:function(e,t){t.Z="data:image/png;base64,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HqXq3HN9AQCA5xKUG5rD3FLt+N6S7RyVGv/b82RkJngAAACuIihfrHXX6z0Bcm/ovDOsPrEVHAAAeKZxkjR2q7mf2dqMzaXhObfs3sBbWk6qu3NpGbWza6f2MT6WOqZewgDwTl8fcvX1/e+V89JG78dRi/IBuRO6dsPvmnKOLtuqjNr9qVnuSNkAAABnEJR5BF2vAQCAqwjKPIZQDAAAXOGvuysAAAAAPRGUAQAAIDDrNQAAXWp9W02gX73FUi3KAAAAEAjKAAAAEJj1GgCA7vXWLfMKsev5F/e/V85LG70fR0G5gdz4mR5PeI3eX7wAAABnEJQPmsNkDJImngAAAHguQZmslq3IqR8UAAAAeiQon0AYBAAAeC5B+aBpmoZxHIdxHDcD8rJL9nL5VJfteZmt7txbXb9rw/ueupbURcsyAADQO7eHaiCG2VyAjAExFX6Xzy+XiY8tt7u2ndKgndqntTCbqktqW8tytsoFAAC4mxblRpZhOdWqugyMLbbXQ+jsoQ4AAACtaFFubG8LbmtzYL+7HgAAAE+jRfmgXsfc9lYfAACAp9CifIHcmOSrWnt7a1nurT4AAADROGl6PCQX+NYm2sots2fW65Lt5JZbs7W91L7U7J+XHQCw5evXDl/f/145L230fhx1vT6o5qRuLVszy3SrOu0tI/X8kf0DAADoha7XAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEPw6q+BxHH//PU3TWZsBAACApk5rUZ6m6XdAjqEZAAAAeqbrNQAAAASCMgAAAASCMgAAAASCMgAAAASCMgAAAASnB2UzXwMAAPAkpwflOSC7lzIAAABPoOs1AAAABIIyAAAABIIyAAAABIIyAAAABL/OKjjOcm0iLwAAAJ7itKAsHAMAAPBEul4DAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABA8OvuCgAAAD9N03R3FeCztCgDAABAICgDAABAICgDAABAYIwyAABAIWPHv0GLMgAAAASCMgAAAASCMgAAAASCMgAAAAQm8wIeZxzHYRiOTabRogwArjN/bgNcQVCGF4sXFb0GwhhYrwqvXwnJuWP7hNcFAMCdBGV4qSeEwa2QvNV6kHt+bZ+fcFxaWDu28//HcRzGcXz9sQAAqCUoX2jPRT31HOcyW4Gxh1bH1HaX57ekbqnXxFoIv7tFu+TY93B+AM7m8w24i6B8kT2tZa23vdz+GznO20qOx7I18oxWxz1drnOBt7Rue8pvqdWx31rmju7sAABvYtbr4e/uh71oXZ8rLpB7O4Ylvnqcp2mq6pocu+m2FOuxVadUvc6s21laHPuSZWqPLQAAf9KifCMXr387sxus4/xsWy31sVU1twwAANRoEpS3WnPWusHWdJGtvQDeGqu6fH55oZ26QN/bvbakC2vL+tR08VzWc2v9te3sDSutwo3j/B4177Xl5FQl6wAAQM44NbqazIWN3Li53DLx8fm5PRe+Jdvfery2nJp6ra1/tD6tl9lab6vOd/j6cS5ZrmYbPZzfIz+k1XbNvmsyr1avqRZ1AQD4sku7Xte2xC3H4LXc/l2WLV891GnLVWNvW27/68f5zEm47lL6g0ZtGanyvkJIBgBIaxaUl+ME58eWrroQTdUnV6c79BJkegkGZx0Dx/m9hDwAAM5yaYvyWpfTM6S6Nd4VmHq9qO+tPkc5ztfZO15/T/l7lmtdp7P3FwCAfjQNyjXjic8OyXsD09Z6V7cMtqhPbeA4GgJ6DatrHOe/LVvh7zqfe8ZXP13Jse/l/AAAvFmzybx+F7gzcMQLvtRze+tRWtZaa1GL8bNX12fvMrnnUudnaxK2OzjOP5cr3a8927krpNVut9UkaEf394xj36I+QjYAwJ+aB2WgH2f+eHFHyNo750CLWa/fFCp7+FELAKBngjLwKHsCa8vbagEA8H6CMgAAAAR/3V0BAAAA6ImgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAMH/AL6mH3zwK5TqAAAAAElFTkSuQmCC"},3491:function(e,t,n){t.Z=n.p+"assets/images/1582255572530-196a220afa29b54aed5bcd2b51c3bf4b.png"}}]);
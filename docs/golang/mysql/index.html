<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cha Jing Wang RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cha Jing Wang Atom Feed"><title data-react-helmet="true">ORM æ¡†æ¶ | Cha Jing Wang</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://chajing.wang/docs/golang/mysql"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ORM æ¡†æ¶ | Cha Jing Wang"><meta data-react-helmet="true" name="description" content="ORM æ¡†æ¶ä»‹ç»"><meta data-react-helmet="true" property="og:description" content="ORM æ¡†æ¶ä»‹ç»"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chajing.wang/docs/golang/mysql"><link data-react-helmet="true" rel="alternate" href="https://chajing.wang/docs/golang/mysql" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://chajing.wang/docs/golang/mysql" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1fc8377a.css">
<link rel="preload" href="/assets/js/runtime~main.d0e08e93.js" as="script">
<link rel="preload" href="/assets/js/main.da0e05fb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">èŒ¶ç»ç½‘</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/leixwang/chajing.wang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">ç›®å½•è¯´æ˜</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/docs/golang/">Golang è¯­è¨€</a><button aria-label="Toggle the collapsible sidebar category &#x27;Golang è¯­è¨€&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/golang/mysql">ORM æ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/redis">Redis æ•°æ®åº“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/session">SessionåŠŸèƒ½å®ç°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/micro-server">å¾®æœåŠ¡ï¼ˆmicro servicesï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/home">ç§Ÿæˆ¿ç½‘</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ORM æ¡†æ¶</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="orm-æ¡†æ¶ä»‹ç»">ORM æ¡†æ¶ä»‹ç»<a class="hash-link" href="#orm-æ¡†æ¶ä»‹ç»" title="Direct link to heading">â€‹</a></h2><ul><li>ORMï¼šObject  Relational   Mapping  â€”â€” å¯¹è±¡å…³ç³»æ˜ å°„ã€‚</li></ul><p><img alt="1582249051388" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8oAAADnCAYAAADGta9BAAARYUlEQVR4nO3dS7KkuBkGUOioFXjuofe/IA899xbwwEH1X1wJJBAg4JyIjr6VCUJAPvhSD8ZpmqYBAAAAGIZhGP66uwIAAADQE0EZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAgl93VwAAcv77z3/98e9//Off2edSy60tsywPgP6M4/j772mabqwJXzNOXnEAdGgOucvQmwrLa4/lwrKQDNDeHGxbRowzyryyfJ5J12sAupMKwKWtxAAAR+l6DQAArIpdoKO5FXb5/LKVNtWFOtetOretrfrk6pJapqTOfJugDMDjrY1lBuCYVIBchsxlSF2GzWmakuuUhNXSZcZxHKZp+lFurNu8TEmd+TZdrwF4vFQXbQDOMwfS3j2hjvRJizIAAJA1t9DmWpHvUtJFG/bSogzAK5jsC+A8cwtybEm+O6gu63R3cOddBGUAACAr1ZrcYr29k3bt2VapVuXwfIIyAN1JtQ6nbhlVsh4Abcwhcm3yq7UJspaTai3L3rvM2gzb89+px0rqzHeNk1cCAJ1am80691xNSDbxFwCQIigDAABAoOs1AAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABL/urgAAfRvHcRiGYZimqclye9ffW/683tKeetbU4az9AQDOJygDcFgMo3uD6TRNwziOwziOh0Lsnm23JgRDG2vva+A9evy+FJQBOKS05fTMbSyf2xNUU/U8Gtjj3z1eBAAAaYIywEe1aIEtaUlePl8advfUZ207peF5btlerpcqa628+XEtYgDwPIIywEelAt4c6krC4XKZrRbdtcBYGyZrx/226Aod9zm1/7m65P7dsm7wBV98j+iV0ifnpY3ef0gWlAH4oaQbc67FdE/wWwvtrVq3r76YWR6fM8I7AHAOQRngw1ItpEdnrc79+2wtwnZc56jefykHAPIEZYAPizNNRzUBM9e9+s6W0lw9SsdJtwi5xigDwHMJygAfl2pNzgXonNT45Xibp63ux6Vlp+q+Vo/U8kduQXWU7tYA8AyCMgC7pYJpze2R1gJjTajcmnwst85W2bl9Wf6daoXOjZOu+QECALiHoAzwcanQNwxlXYfXul0f6Yadq1NJPVLl7GnJXluvNPQLxADwTH/dXQEA+rBnTO3cOhoDZGnr6llyLbapeubW33r8SJfxtW0DAH0QlAE+7OiY2Tn0xYCcu79y7XjnGCj3rJuqa0lZLUKsscgA8GyCMsBHpcLc3tbOrdba0pCaq9PedZfWyor1Xu5DTXgXkgHg+YxRBviomomsSp7fCpDLFuea20qtrRvXLx1XXTPzdS68p8pI3Zc6Vx4A0K9x8pM3ABl7W0dL19sz4VfpOi1adrfK2Pu8Vmco08u92e/y9f3vlfPSRu/HUYsyAFlHxi6fVf6ZZdeWsff5Hi8I6IMfUc611uMFIBKUAQA6UHtbNOoth2fU3qfdOYHvMJkXHLC8NQ4A7JXqou/75X7CMXyToAw7ldyPFQBqpL5PBGaA6+l6nWD8CgBwl9zs7cYvX8cPE4CgvLB125Irtr3cPgDwPQLzPe68FgT6cUnX67d2GWq9X1d84V15Lno7773VBwBKbN1+DID2tCgX8IstAHAnrcsA1zo1KG99mC+fn6ap+NfR3GQXJcttlTu3PJb+gru2X2uP5eq8tb1cubllSupcY2sMd+15T5VTcwxTZZ617wBwJ4EZ3qF0TqS1a9xcOTXX3CXlfNU4XXAE1j6818aB5AJSyTpb2y2t89r6rfar1TJb623VuUTNcd7a1tZ53Xuez9r3s8oCgL3ePgHpWfO31FzD3TmHTMttlzaupJataeT5Qvg6el5aXePWljM/vrec1nqfn+n220MtT9DaSZkfK/2V5Gi9rthOS3e9wI7eHime19pyUq+XK27X9LTXBgDvtPZjdPyP/1sej9Txid/xuZb7J1q+VnLXuqnbX+YCTerv1DX9E6+rr7a8fj3jGvfINfcXvW6Mcus3X0lX7Cv08qESj8fycZ6nl9cVAFyh9Hrl7dc1a/tXO0SQer1eTzvff+oiKC9fLC1+Kdmr1y61PdUn1T3n7h8SAIA839PUaBmYhK+0Hq+nfUb86fKu10e6AJV0z261rVpb29o7adeebZXaU87ebbeoc+lkBSXb0hUNgK/xvUeJVNfrI2LXa11+/6/kOnTvNW4rrpUvmsxrGLYHa5dMqhAdWa60niXlrO1XyaQJe5fJPRcH6JfU647jU1NG6cQTpV1XzpgUwwc+AD0ouSaYH3+K3if7OVvr/a+dMCq3/dQya3+vbf+JWk3mtVRyLVySN1pdc599nnp/f18WlLeUBOVOqgq/9f4GB+AbzvyR/E5PrXcrZ/zAH8tbm8gsJffjS82ybziPX39dttL7cbx9jHJpS/P8d48Hke/yegTgbiW9qnxfUfO6KJ3sa8824SluD8pbbyBvMACAtN5mzQV4i9uDMgAAdd7apRWgF5fPeg0AwH5CMsD5BGUAgIcQkgGuISgDADyAkAxwHWOUAQA6Z9IugGtpUQYA6JiQDHA9LcoAAJ0Skn9KdUH/gq/ud++clzbGcezu802LMgBAh4RkgPsIygAAnRGSAe6l6zUAQCfMbL3tS8cjvh6+tN+9c17a6P04CsoH5cYl3Hmye3/RAQBlfI8D3ENQPmj+ApvDackXmiALAGxxjQBwH0H5BtM0nTpDXssv1pofAACAY3zfAvTBZF4AAAAQaFG+yFX3WNuaJXOtHnHZ5XJalgEAgK/QonyBGDLn/86yVf7yubj8cux0XPbsegMAAPRCUP4wwRcAAOAnQRkAAAACQRkAAAACk3nd4KqJvVozoRcA8FZb1znLuVyAd9OifNA4jn98cC7/PQzDH5Nl5WaTvqo+qb9zzw/D8GOiL18MAMCbpK7PUssMw8/rIuC9tCgfVBocrwqYW9tJPb9nHQCAN9gKv8uQPE3T73DtGgneS1AGAADoTIvhAIYM7KfrNQAAfMRWV/P5+Su6l1+5rSdpNRzAkIFjBGUAAHi5FoFUsL3GNE2rrb+p4QDx8dJlWKfrNQAAvFxpUFoLaPP47NZ1gh5pUQYAAIBAizIAAJC9TejWsqnltsqq2RbcQYsyAABkLLssb81E/GRbY2NTyw/Dz9Abj1FumdptwdUEZQAAPms5OVVqsqpl2BPw1ieJWgvI8BS6Xh+Q6nKiG8lP7t8GAPSq9NrENUwdAZmn06J8QPzATP3C6AMVAICvSXW9pp2S4QBfGjJwFkGZVS3ulTd/SHpjAgC8Q2kA07Jcr9VwAEMGjtH1uqFxHL0AAQDoztqEWzXLlDw/3285VV7JBGBf13I4gOO5n6B8kbWxyzU3fk8tu+cNkNtm6YdXaZ1rbw2wZ1kfAAAA61qFqlYhzvUbvdP1upG1ALk1RX5uXPPa2IIjswnmylnuz7Iua/9e1n1tubV1cvuVG+viQxYAAGhNi/IFalqP73I0cC5vEXBHHQAAAFoQlC/SMiC3mFxrbVKAHqXq3HN9AQCA5xKUG5rD3FLt+N6S7RyVGv/b82RkJngAAACuIihfrHXX6z0Bcm/ovDOsPrEVHAAAeKZxkjR2q7mf2dqMzaXhObfs3sBbWk6qu3NpGbWza6f2MT6WOqZewgDwTl8fcvX1/e+V89JG78dRi/IBuRO6dsPvmnKOLtuqjNr9qVnuSNkAAABnEJR5BF2vAQCAqwjKPIZQDAAAXOGvuysAAAAAPRGUAQAAIDDrNQAAXWp9W02gX73FUi3KAAAAEAjKAAAAEJj1GgCA7vXWLfMKsev5F/e/V85LG70fR0G5gdz4mR5PeI3eX7wAAABnEJQPmsNkDJImngAAAHguQZmslq3IqR8UAAAAeiQon0AYBAAAeC5B+aBpmoZxHIdxHDcD8rJL9nL5VJfteZmt7txbXb9rw/ueupbURcsyAADQO7eHaiCG2VyAjAExFX6Xzy+XiY8tt7u2ndKgndqntTCbqktqW8tytsoFAAC4mxblRpZhOdWqugyMLbbXQ+jsoQ4AAACtaFFubG8LbmtzYL+7HgAAAE+jRfmgXsfc9lYfAACAp9CifIHcmOSrWnt7a1nurT4AAADROGl6PCQX+NYm2sots2fW65Lt5JZbs7W91L7U7J+XHQCw5evXDl/f/145L230fhx1vT6o5qRuLVszy3SrOu0tI/X8kf0DAADoha7XAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEPw6q+BxHH//PU3TWZsBAACApk5rUZ6m6XdAjqEZAAAAeqbrNQAAAASCMgAAAASCMgAAAASCMgAAAASCMgAAAASnB2UzXwMAAPAkpwflOSC7lzIAAABPoOs1AAAABIIyAAAABIIyAAAABIIyAAAABL/OKjjOcm0iLwAAAJ7itKAsHAMAAPBEul4DAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABA8OvuCgAAAD9N03R3FeCztCgDAABAICgDAABAICgDAABAYIwyAABAIWPHv0GLMgAAAASCMgAAAASCMgAAAASCMgAAAAQm8wIeZxzHYRiOTabRogwArjN/bgNcQVCGF4sXFb0GwhhYrwqvXwnJuWP7hNcFAMCdBGV4qSeEwa2QvNV6kHt+bZ+fcFxaWDu28//HcRzGcXz9sQAAqCUoX2jPRT31HOcyW4Gxh1bH1HaX57ekbqnXxFoIv7tFu+TY93B+AM7m8w24i6B8kT2tZa23vdz+GznO20qOx7I18oxWxz1drnOBt7Rue8pvqdWx31rmju7sAABvYtbr4e/uh71oXZ8rLpB7O4Ylvnqcp2mq6pocu+m2FOuxVadUvc6s21laHPuSZWqPLQAAf9KifCMXr387sxus4/xsWy31sVU1twwAANRoEpS3WnPWusHWdJGtvQDeGqu6fH55oZ26QN/bvbakC2vL+tR08VzWc2v9te3sDSutwo3j/B4177Xl5FQl6wAAQM44NbqazIWN3Li53DLx8fm5PRe+Jdvfery2nJp6ra1/tD6tl9lab6vOd/j6cS5ZrmYbPZzfIz+k1XbNvmsyr1avqRZ1AQD4sku7Xte2xC3H4LXc/l2WLV891GnLVWNvW27/68f5zEm47lL6g0ZtGanyvkJIBgBIaxaUl+ME58eWrroQTdUnV6c79BJkegkGZx0Dx/m9hDwAAM5yaYvyWpfTM6S6Nd4VmHq9qO+tPkc5ztfZO15/T/l7lmtdp7P3FwCAfjQNyjXjic8OyXsD09Z6V7cMtqhPbeA4GgJ6DatrHOe/LVvh7zqfe8ZXP13Jse/l/AAAvFmzybx+F7gzcMQLvtRze+tRWtZaa1GL8bNX12fvMrnnUudnaxK2OzjOP5cr3a8927krpNVut9UkaEf394xj36I+QjYAwJ+aB2WgH2f+eHFHyNo750CLWa/fFCp7+FELAKBngjLwKHsCa8vbagEA8H6CMgAAAAR/3V0BAAAA6ImgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAMH/AL6mH3zwK5TqAAAAAElFTkSuQmCC"></p><ul><li><p>ä½œç”¨ï¼š</p><ul><li>é€šè¿‡æ“ä½œç»“æ„ä½“å¯¹è±¡ï¼Œæ¥è¾¾åˆ°æ“ä½œæ•°æ®åº“è¡¨çš„ç›®çš„ã€‚</li><li>é€šè¿‡ç»“æ„ä½“å¯¹è±¡ï¼Œæ¥ç”Ÿæˆæ•°æ®åº“è¡¨ã€‚</li></ul></li><li><p>ä¼˜ç‚¹ï¼š</p><ul><li>SQLæœ‰å¯èƒ½ æ¯”è¾ƒå¤æ‚ã€‚ï¼ˆOracle --- å­æŸ¥è¯¢ -- åµŒå¥—ï¼‰ORM æ“ä½œæ•°æ®åº“ï¼Œä¸éœ€è¦ä½¿ç”¨ SQL</li><li>ä¸åŒå¼€å‘è€…ï¼Œä¹¦å†™çš„ SQL è¯­å¥æ‰§è¡Œæ•ˆç‡ä¸åŒã€‚</li></ul></li><li><p>goè¯­è¨€æ”¯æŒçš„ ORMï¼š</p><ul><li>gORMï¼š<a href="http://gorm.book.jasperxu.com/" target="_blank" rel="noopener noreferrer">http://gorm.book.jasperxu.com/</a></li><li>xORMï¼š</li></ul></li></ul><header><h1>gorm è¿æ¥æ•°æ®åº“ã€å»ºè¡¨</h1></header><ul><li><p>grom æ“ä½œçš„éƒ½æ˜¯è¡¨ã€è¡¨æ•°æ®ã€‚â€”â€” ä¸èƒ½æ“ä½œæ•°æ®åº“ï¼ä½¿ç”¨SQLé…åˆå®Œæˆã€‚</p><div class="codeBlockContainer_J+bg language-sql theme-code-block"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">database</span><span class="token plain"> åº“å </span><span class="token keyword" style="color:#00009f">charset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utf8</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å›é¡¾mysql">å›é¡¾MySQL<a class="hash-link" href="#å›é¡¾mysql" title="Direct link to heading">â€‹</a></h2><ol><li>ç¡®è®¤mysqlæœåŠ¡ï¼Œå¯åŠ¨ï¼š<code> ps xua | grep mysql</code></li><li>è¿æ¥MySQLæ•°æ®åº“ï¼š mysql -uroot -p123456</li><li>æŸ¥çœ‹æ•°æ®åº“ï¼šshow databases;</li><li>åˆ é™¤æ•°æ®åº“ï¼šdrop database t1;    t1 ä»£è¡¨åº“åã€‚</li><li>é€‰æ‹©æ•°æ®åº“ã€æŸ¥çœ‹è¡¨ï¼šuse æ•°æ®åº“åï¼›     show tablesï¼›</li><li>åˆ›å»ºæ•°æ®åº“ï¼š create database test charset=utf8;</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-æ“ä½œ-mysql-æ•°æ®åº“">gORM æ“ä½œ MySQL æ•°æ®åº“<a class="hash-link" href="#gorm-æ“ä½œ-mysql-æ•°æ®åº“" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="åˆ›å»ºè¡¨">åˆ›å»ºè¡¨<a class="hash-link" href="#åˆ›å»ºè¡¨" title="Direct link to heading">â€‹</a></h3><ol><li><p>è¿æ¥æ•°æ®åº“</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/jinzhu/gorm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/go-sql-driver/mysql&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//&quot;_&quot; ä»£ç ä¸ç›´æ¥ä½¿ç”¨åŒ…, åº•å±‚é“¾æ¥è¦ä½¿ç”¨!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// mysql: æ•°æ®åº“çš„é©±åŠ¨å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é“¾æ¥æ•°æ®åº“ --æ ¼å¼: ç”¨æˆ·å:å¯†ç @åè®®(IP:port)/æ•°æ®åº“åï¼Ÿxxx&amp;yyy&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;gorm.Open err:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>åˆ›å»ºæ•°æ®åº“è¡¨ã€‚ â€”â€”ä¸èƒ½ä½¿ç”¨gormåˆ›å»ºæ•°æ®åº“ã€‚  æå‰ä½¿ç”¨ SQLè¯­å¥ï¼Œåˆ›å»ºå¥½æƒ³è¦çš„æ•°æ®åº“ã€‚</p><p>AutoMigrate()  åˆ›å»ºè¡¨ã€‚é»˜è®¤åˆ›å»ºçš„è¡¨ ä¸º å¤æ•°ç±»å‹ã€‚â€”â€” è‡ªåŠ¨æ·»åŠ  â€œsâ€ </p><p>åœ¨åˆ›å»ºä¹‹å‰ï¼Œ æ·»åŠ  <code>	conn.SingularTable(true)</code> å¯ä»¥åˆ›å»ºéå¤æ•°è¡¨åçš„è¡¨ã€‚</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¸è¦å¤æ•°è¡¨å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å€ŸåŠ© gorm åˆ›å»ºæ•°æ®åº“è¡¨.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æŸ¥çœ‹</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> desc student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Field </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Type         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Null </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Default </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Extra          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NO   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> PRI </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> auto_increment </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> YES  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> YES  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-åŒ…çš„-init-æ–¹æ³•">MySQL åŒ…çš„ init æ–¹æ³•<a class="hash-link" href="#mysql-åŒ…çš„-init-æ–¹æ³•" title="Direct link to heading">â€‹</a></h3><ol><li><p><code>_ &quot;github.com/go-sql-driver/mysql&quot;</code> å¯¼å…¥åŒ…æ—¶ï¼Œ â€œ_â€ ,è¡¨ç¤ºï¼Œé©±ä½¿goç³»ç»Ÿï¼Œåœ¨main() å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œè‡ªåŠ¨è°ƒç”¨ init() å‡½æ•°ã€‚</p></li><li><p>goè¯­è¨€ä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šå‡½æ•°ï¼š  â€”â€” é¦–å­—æ¯å°å†™ï¼ŒåŒ…å¤–å¯è§ ã€‚</p><ol><li>main()   â€”â€” é¡¹ç›®çš„å…¥å£å‡½æ•° </li><li>init() â€”â€” å½“å¯¼åŒ…ï¼Œä½†æ²¡æœ‰åœ¨ç¨‹åºä¸­ä½¿ç”¨ã€‚ åœ¨main() è°ƒç”¨ä¹‹å‰ï¼Œè‡ªåŠ¨è¢«è°ƒç”¨ã€‚<ul><li>æŸ¥çœ‹ï¼šå…‰æ ‡ç½®äº MySQLåŒ…çš„ â€œmysqlâ€ ä¸Šã€‚ ä½¿ç”¨ Ctrl-é¼ æ ‡å·¦é”®ã€‚ çœ‹åˆ°æºç ã€‚ åœ¨ driver.go åº•éƒ¨åŒ…å« init() å‡½æ•°çš„ å®šä¹‰ã€‚</li><li>init() ä½œç”¨ï¼šå®ç°æ³¨å†Œ MySQL é©±åŠ¨ã€‚</li></ul></li></ol></li><li><p>æµ‹è¯•ï¼š</p><p>test2/ ä¸­</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> åˆ›å»º test2</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> ç›®å½•ï¼Œ åœ¨å†…éƒ¨æ·»åŠ  </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> test2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é¦–å­—æ¯å°å†™å‡½æ•°, åŒ…ä½œç”¨åŸŸ, ä¸èƒ½è·¨åŒ…ä½¿ç”¨!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æµ‹è¯• init å‡½æ•° ....&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>test/ ä¸­</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/jinzhu/gorm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bj38web/web/test2&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//&quot;_&quot; ä»£ç ä¸ç›´æ¥ä½¿ç”¨åŒ…, åº•å±‚é“¾æ¥è¦ä½¿ç”¨!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;----this is main ---&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">è¾“å‡ºï¼š æµ‹è¯• init å‡½æ•° </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å†è¾“å‡ºï¼š</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain">this is main </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p>è¿è¡Œç»“æœï¼š init å‡½æ•° ä¼šå…ˆäº main() å‡½æ•°è¢«è°ƒç”¨ï¼ï¼ï¼</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="gormçš„è¿æ¥æ± ">gormçš„è¿æ¥æ± <a class="hash-link" href="#gormçš„è¿æ¥æ± " title="Direct link to heading">â€‹</a></h3><ol><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token plain"> é»˜è®¤ï¼Œ gromæ¡†æ¶åˆ›å»ºå¥½çš„MySQLæ•°æ®åº“è¿æ¥ conn ï¼Œå°±æ˜¯ä¸€ä¸ªè¿æ¥æ± çš„å¥æŸ„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>åˆå§‹åŒ–å…¨å±€å˜é‡ï¼Œ æ¥æ”¶å¥æŸ„</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå…¨å±€è¿æ¥æ± å¥æŸ„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> GlobalConn </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä¿®æ”¹è¿æ¥æ± åˆå§‹å±æ€§</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆå§‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxIdleConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æœ€å¤§æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxOpenConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä½¿ç”¨è¿æ¥æ± å¥æŸ„</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> å¯¹æ¯”redisè¿æ¥æ± ï¼šä¸éœ€è¦ä½¿ç”¨ </span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> æ–¹æ³•ï¼Œå–ä¸€æ¡è¿æ¥ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä¸è¦å¤æ•°è¡¨å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å€ŸåŠ© gorm åˆ›å»ºæ•°æ®åº“è¡¨.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><header><h1>gorm æ“ä½œæ•°æ®åº“æ•°æ®</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-æ’å…¥æ•°æ®">gorm æ’å…¥æ•°æ®<a class="hash-link" href="#gorm-æ’å…¥æ•°æ®" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// insert into student(name, age) values(&#x27;zhangsan&#x27;, 100)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InsertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å…ˆåˆ›å»ºæ•°æ® --- åˆ›å»ºå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhangsan&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ’å…¥(åˆ›å»º)æ•°æ®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æ’å…¥æ•°æ®æ—¶ï¼Œä½¿ç”¨çš„ create() å‡½æ•°ï¼Œä¼ å‚æ—¶ï¼Œå¿…é¡»ä¼ å…¥ &amp;å¯¹è±¡ã€‚ å¦‚æœé—æ¼ â€œ&amp;â€ ä¼šæŠ¥é”™ï¼š</li></ul><p><img alt="1582255572530" src="/assets/images/1582255572530-196a220afa29b54aed5bcd2b51c3bf4b.png"></p><ul><li>è¦ä¿è¯ ï¼Œåœ¨æ’å…¥æ•°æ®åº“æ—¶ï¼Œ<code>GlobalConn.SingularTable(true)</code> ç”Ÿæ•ˆã€‚ä»£è¡¨ä¸ä½¿ç”¨ å¤æ•°è¡¨åã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-æŸ¥è¯¢æ•°æ®">gorm æŸ¥è¯¢æ•°æ®<a class="hash-link" href="#gorm-æŸ¥è¯¢æ•°æ®" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç®€å•æŸ¥è¯¢æ–¹æ³•">ç®€å•æŸ¥è¯¢æ–¹æ³•ï¼š<a class="hash-link" href="#ç®€å•æŸ¥è¯¢æ–¹æ³•" title="Direct link to heading">â€‹</a></h3><ol><li><p>First(&amp;suer):</p><ul><li><p>è·å– user è¡¨ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SearchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">First</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ç›¸å½“äºSQLï¼š<code> SELECT * FROM student ORDER BY id LIMIT 1;</code></p></li><li><p>åªæŸ¥è¯¢ nameã€age ä¸æŸ¥è¯¢å…¶ä»–å€¼ï¼š</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">First</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li><p>Last(&amp;user)</p><ul><li>è·å– user è¡¨ä¸­çš„æœ€åä¸€æ¡æ•°æ®</li><li>ç›¸å½“äºSQLï¼š<code> SELECT * FROM users ORDER BY id DESC LIMIT 1</code></li></ul></li><li><p>Find(&amp;user)</p><ul><li><p>è·å– user è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Student       </span><span class="token comment" style="color:#999988;font-style:italic">// æ”¹ä¸ºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Find() æŸ¥è¯¢å¤šæ¡</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ç›¸å½“äºSQLï¼š<code>select name, age from student;</code></p></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="where-å­å¥ä½¿ç”¨">where å­å¥ä½¿ç”¨<a class="hash-link" href="#where-å­å¥ä½¿ç”¨" title="Direct link to heading">â€‹</a></h3><ul><li><p>select name, age from student where name = â€˜lisiâ€™;</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">æˆ–ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>select name, age from student where name = â€˜lisiâ€™ and age = 22; </p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//æ–¹æ³•1ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;age = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//æ–¹æ³•2ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ? and age = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-æ›´æ–°æ•°æ®">gorm æ›´æ–°æ•°æ®<a class="hash-link" href="#gorm-æ›´æ–°æ•°æ®" title="Direct link to heading">â€‹</a></h2><ol><li>Save(): æ ¹æ®ä¸»é”®æ›´æ–°ã€‚ å¦‚æœæ•°æ®æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œä¸æ›´æ–° ï¼Œå˜ä¸º â€œæ’å…¥â€æ“ä½œã€‚</li><li>Update(): æ›´æ–°ä¸€ä¸ªå­—æ®µã€‚</li><li>Updates(): æ›´æ–°å¤šä¸ªå­—æ®µã€‚</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="save">save<a class="hash-link" href="#save" title="Direct link to heading">â€‹</a></h3><ul><li><p>æ’å…¥ï¼š</p><ul><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wangwu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// æ²¡æœ‰æŒ‡å®š id -- æ²¡æœ‰ä¸»é”®! --- æ’å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>select * from student;</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> zhangsan </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li><p>æ›´æ–°ï¼š</p><ul><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wangwu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">77</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//æŒ‡å®š id -- æ›´æ–°æ“ä½œ!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> zhangsan </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">77</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> rows </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update">update<a class="hash-link" href="#update" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhaoliu&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> æŒ‡å®šæ›´æ–° â€œstudentâ€ è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhaoliu&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">ï¼š æŒ‡å®šè¿‡æ»¤æ¡ä»¶ã€‚ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">ï¼šæŒ‡å®š æŠŠ â€œzhaoliuâ€ æ›´æ–°æˆ â€œlisiâ€    </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="updates">updates<a class="hash-link" href="#updates" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Updates</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;liuqi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;age&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">77</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="grom-åˆ é™¤æ•°æ®">grom åˆ é™¤æ•°æ®<a class="hash-link" href="#grom-åˆ é™¤æ•°æ®" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="åˆ é™¤">åˆ é™¤<a class="hash-link" href="#åˆ é™¤" title="Direct link to heading">â€‹</a></h3><ul><li>ç‰©ç†åˆ é™¤ã€‚çœŸæ­£çš„æ‰§è¡Œ Deleteã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="è½¯åˆ é™¤">è½¯åˆ é™¤<a class="hash-link" href="#è½¯åˆ é™¤" title="Direct link to heading">â€‹</a></h3><ul><li><p>é€»è¾‘åˆ é™¤ã€‚ä¸çœŸæ­£åˆ ã€‚ä¸æ‰§è¡ŒDeleteã€‚ â€”â€” æ•°æ®æ— ä»·çš„ï¼</p><ul><li>åˆ›å»ºè¡¨æ—¶ï¼Œåœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ª â€œåˆ é™¤å­—æ®µâ€ ã€‚å½“éœ€è¦åˆ é™¤æ—¶ï¼Œæ›´æ–° â€œåˆ é™¤å­—æ®µâ€ï¼Œ æ›´æ–°ä¸º ï¼štrue</li><li>æŸ¥è¯¢æ—¶ï¼Œä¸æŸ¥è¯¢ â€œåˆ é™¤å­—æ®µâ€ ä¸º null çš„å€¼ã€‚</li><li>ä¸¾ä¾‹ï¼šæ·˜å®ï¼Œåˆ é™¤è®¢å•ã€‚ æ‰‹æœºï¼Œåˆ é™¤å›¾ç‰‡ã€‚</li></ul></li><li><p>å®ç° è½¯åˆ é™¤ï¼š</p><ul><li><p>åˆ›å»ºè¡¨ï¼š</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå…¨å±€ç»“æ„ä½“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Model      </span><span class="token comment" style="color:#999988;font-style:italic">// goè¯­è¨€ä¸­, åŒ¿åæˆå‘˜ --- ç»§æ‰¿! Student ç»§æ‰¿ Model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> åœ¨ â€œModelâ€ ä¸Šï¼ŒCtrl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">B è·³è½¬è‡³ Model ç±»å®šä¹‰ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Model </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ID        </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:&quot;primary_key&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UpdatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DeletedAt </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token string" style="color:#e3116c">`sql:&quot;index&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> Model è¡¨ç”± mysqlè‡ªåŠ¨ç»´æŠ¤ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç»´æŠ¤ã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ‰§è¡Œè½¯åˆ é™¤ï¼š</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ä½¿ç”¨ </span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> å‚æ•°ï¼ŒæŒ‡å®šè¦åˆ é™¤çš„æ•°æ®æ‰€åœ¨è¡¨çš„è¡¨åã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>éªŒè¯ï¼š</p><ol><li><p>select * from studentï¼›  ä¾ç„¶èƒ½çœ‹åˆ° â€œlisiâ€ ç›¸å…³æ•°æ®ã€‚ ä½†æ˜¯ ã€‚delete_at å­—æ®µã€‚è¢«å¡«å…¥æ•°æ®ã€‚</p></li><li><p>åœ¨ gorm æ¡†æ¶ä¸­ï¼Œæ‰§è¡Œ æŸ¥è¯¢è¯­å¥ï¼š</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SearchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> æŸ¥è¯¢ç»“æœä¸ºï¼š </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;è½¯åˆ é™¤&quot;</span><span class="token plain"> æˆåŠŸï¼</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></li><li><p>æƒ³ æŸ¥è¯¢ â€œè½¯åˆ é™¤â€çš„æ•°æ®ï¼š</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æƒ³ å®ç° â€œç‰©ç†åˆ é™¤â€</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> å€ŸåŠ© </span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> æ‰§è¡Œåˆ é™¤ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-8å°æ—¶-æ—¶åŒºé—®é¢˜">MySQL 8å°æ—¶ æ—¶åŒºé—®é¢˜<a class="hash-link" href="#mysql-8å°æ—¶-æ—¶åŒºé—®é¢˜" title="Direct link to heading">â€‹</a></h3><ul><li><p>MySQLé»˜è®¤ä½¿ç”¨çš„æ—¶é—´ ï¼š ç¾å›½ ä¸œ 8 åŒº æ—¶é—´ ã€‚ â€”â€” åŒ—äº¬æ—¶é—´ â€”â€” å·® 8 å°æ—¶ã€‚</p></li><li><p>åœ¨è¿æ¥æ•°æ®åº“æ—¶ï¼Œæ·»åŠ å±æ€§ï¼š<code>?parseTime=True&amp;loc=Local</code> </p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql,                &quot;</span><span class="token plain">root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">123456</span><span class="token plain">@</span><span class="token function" style="color:#d73a49">tcp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">127.0</span><span class="token number" style="color:#36acaa">.0</span><span class="token number" style="color:#36acaa">.1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3306</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">test?parseTime</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">True</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">loc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Local&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å†æ‰§è¡ŒSQLè¯­å¥ã€gormè®¿é—®MySQL ä½¿ç”¨ åŒ—äº¬æ—¶é—´ã€‚</p></li></ul><header><h1>gorm è®¾ç½®è¡¨å±æ€§</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ä¿®æ”¹è¡¨å­—æ®µå¤§å°">ä¿®æ”¹è¡¨å­—æ®µå¤§å°<a class="hash-link" href="#ä¿®æ”¹è¡¨å­—æ®µå¤§å°" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå…¨å±€ç»“æ„ä½“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain">     </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:50&quot;`</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// string -- varcharã€‚ é»˜è®¤å¤§å°255.  å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶ï¼ŒæŒ‡å®šå¤§å°ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>ç»“è®ºï¼šä¿®æ”¹è¡¨å±æ€§ï¼Œåªèƒ½åœ¨ç¬¬ä¸€æ¬¡å»ºè¡¨çš„æ—¶å€™ï¼Œæœ‰æ•ˆï¼æˆ–è€…ç»™è¡¨å¢åŠ æ–°å­—æ®µçš„æ—¶å€™ï¼Œæœ‰æ•ˆï¼å…¶ä»–åœºæ™¯ï¼Œä¿®æ”¹è¡¨å±æ€§ ï¼Œåœ¨ gorm æ“ä½œä¸­ï¼Œæ— æ•ˆï¼</li></ul><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå…¨å±€ç»“æ„ä½“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:100;default:&#x27;xiaoming&#x27;&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age   </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:&quot;not null&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="è®¾ç½®æ—¶é—´">è®¾ç½®æ—¶é—´<a class="hash-link" href="#è®¾ç½®æ—¶é—´" title="Direct link to heading">â€‹</a></h2><ul><li><p>é»˜è®¤MySQLæ•°æ®åº“ æœ‰ 3 ç§æ—¶é—´ï¼š</p><ul><li>dateï¼š</li><li>datetimeï¼š</li><li>timeStampï¼šæ—¶é—´æˆ³ã€‚ â€”â€”  gorm ä¸­ï¼Œåªæœ‰ timeStamp</li></ul></li><li><p>å¦‚æœå¿…é¡»ä½¿ç”¨ MySQL æ•°æ®åº“ç‰¹æœ‰çš„ â€œæ•°æ®ç±»å‹â€ï¼Œ ä½¿ç”¨ â€œtypeâ€ å…³é”®å­—æ¥è®¾ç½®ã€‚</p></li></ul><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå…¨å±€ç»“æ„ä½“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:100;default:&#x27;xiaoming&#x27;&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age   </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class </span><span class="token builtin">int</span><span class="token plain">       </span><span class="token string" style="color:#e3116c">`gorm:&quot;not null&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Join  time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token string" style="color:#e3116c">`gorm:&quot;type:timestamp&quot;`</span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»º Student è¡¨æŒ‡å®š timestampç±»å‹ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>é¡¹ç›®ä¸­ä½¿ç”¨è¡¨ çš„åˆ›å»º</h1></header><ol><li><p>åœ¨ é¡¹ç›®çš„ web/model/ ä¸‹ åˆ›å»º  model.go æ–‡ä»¶ã€‚</p></li><li><p>å‚ç…§è®²ä¹‰ã€Šå¾®æœåŠ¡é¡¹ç›®è®²ä¹‰1.mdã€‹ä¸­ 2.2.2 å°èŠ‚ï¼Œå°†åˆ›å»ºè¡¨çš„ä»£ç  æ·»åŠ åˆ°  model.go ã€‚</p></li><li><p>ä½¿ç”¨ SQLè¯­å¥åˆ›å»º æ•°æ®åº“ search_houseã€‚ä¿®æ”¹ InitDb() å‡½æ•°ã€‚åŒæ—¶ï¼ŒæŒ‡å®šMySQLä½¿ç”¨çš„æ—¶é—´ã€‚åˆå§‹åŒ–å…¨å±€è¿æ¥æ± å¥æŸ„ã€‚</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»º æ•°æ®åº“é“¾æ¥å¥æŸ„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> GlobalConn </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InitDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/search_house?parseTime=True&amp;loc=Local&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆå§‹åŒ– å…¨å±€è¿æ¥æ± å¥æŸ„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxIdleConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetConnMaxLifetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">House</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Area</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Facility</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HouseImage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OrderHouse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å°†  InitDb()  åœ¨ web/main.go ä¸­ è°ƒç”¨ï¼</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// åˆå§‹åŒ– MySQL é“¾æ¥æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">InitDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>è¿è¡Œ web/main.go , åˆ›å»º é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨çš„è¡¨</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-è¿æ¥æ•°æ®åº“">gORM è¿æ¥æ•°æ®åº“<a class="hash-link" href="#gorm-è¿æ¥æ•°æ®åº“" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th>å­—æ®µå</th><th>æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>id</td><td>int</td></tr><tr><td>username</td><td>char</td></tr><tr><td>password</td><td>char</td></tr><tr><td>gender</td><td>int</td></tr><tr><td>birthday</td><td>int</td></tr><tr><td>register_time</td><td>int</td></tr><tr><td>last_login_time</td><td>int</td></tr><tr><td>last_login_ip</td><td>char</td></tr><tr><td>user_level_id</td><td>int</td></tr><tr><td>nickname</td><td>char</td></tr><tr><td>mobile</td><td>char</td></tr><tr><td>register_ip</td><td>char</td></tr><tr><td>avatar</td><td>char</td></tr><tr><td>weixin_openid</td><td>char</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/golang/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Golang è¯­è¨€</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/golang/redis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis æ•°æ®åº“</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#orm-æ¡†æ¶ä»‹ç»" class="table-of-contents__link toc-highlight">ORM æ¡†æ¶ä»‹ç»</a></li><li><a href="#å›é¡¾mysql" class="table-of-contents__link toc-highlight">å›é¡¾MySQL</a></li><li><a href="#gorm-æ“ä½œ-mysql-æ•°æ®åº“" class="table-of-contents__link toc-highlight">gORM æ“ä½œ MySQL æ•°æ®åº“</a><ul><li><a href="#åˆ›å»ºè¡¨" class="table-of-contents__link toc-highlight">åˆ›å»ºè¡¨</a></li><li><a href="#mysql-åŒ…çš„-init-æ–¹æ³•" class="table-of-contents__link toc-highlight">MySQL åŒ…çš„ init æ–¹æ³•</a></li><li><a href="#gormçš„è¿æ¥æ± " class="table-of-contents__link toc-highlight">gormçš„è¿æ¥æ± </a></li></ul></li><li><a href="#gorm-æ’å…¥æ•°æ®" class="table-of-contents__link toc-highlight">gorm æ’å…¥æ•°æ®</a></li><li><a href="#gorm-æŸ¥è¯¢æ•°æ®" class="table-of-contents__link toc-highlight">gorm æŸ¥è¯¢æ•°æ®</a><ul><li><a href="#ç®€å•æŸ¥è¯¢æ–¹æ³•" class="table-of-contents__link toc-highlight">ç®€å•æŸ¥è¯¢æ–¹æ³•ï¼š</a></li><li><a href="#where-å­å¥ä½¿ç”¨" class="table-of-contents__link toc-highlight">where å­å¥ä½¿ç”¨</a></li></ul></li><li><a href="#gorm-æ›´æ–°æ•°æ®" class="table-of-contents__link toc-highlight">gorm æ›´æ–°æ•°æ®</a><ul><li><a href="#save" class="table-of-contents__link toc-highlight">save</a></li><li><a href="#update" class="table-of-contents__link toc-highlight">update</a></li><li><a href="#updates" class="table-of-contents__link toc-highlight">updates</a></li></ul></li><li><a href="#grom-åˆ é™¤æ•°æ®" class="table-of-contents__link toc-highlight">grom åˆ é™¤æ•°æ®</a><ul><li><a href="#åˆ é™¤" class="table-of-contents__link toc-highlight">åˆ é™¤</a></li><li><a href="#è½¯åˆ é™¤" class="table-of-contents__link toc-highlight">è½¯åˆ é™¤</a></li><li><a href="#mysql-8å°æ—¶-æ—¶åŒºé—®é¢˜" class="table-of-contents__link toc-highlight">MySQL 8å°æ—¶ æ—¶åŒºé—®é¢˜</a></li></ul></li><li><a href="#ä¿®æ”¹è¡¨å­—æ®µå¤§å°" class="table-of-contents__link toc-highlight">ä¿®æ”¹è¡¨å­—æ®µå¤§å°</a></li><li><a href="#è®¾ç½®æ—¶é—´" class="table-of-contents__link toc-highlight">è®¾ç½®æ—¶é—´</a></li><li><a href="#gorm-è¿æ¥æ•°æ®åº“" class="table-of-contents__link toc-highlight">gORM è¿æ¥æ•°æ®åº“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Leix.Wang, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d0e08e93.js"></script>
<script src="/assets/js/main.da0e05fb.js"></script>
</body>
</html>
<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cha Jing Wang RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cha Jing Wang Atom Feed"><title data-react-helmet="true">ORM 框架 | Cha Jing Wang</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://chajing.wang/docs/golang/mysql"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ORM 框架 | Cha Jing Wang"><meta data-react-helmet="true" name="description" content="ORM 框架介绍"><meta data-react-helmet="true" property="og:description" content="ORM 框架介绍"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chajing.wang/docs/golang/mysql"><link data-react-helmet="true" rel="alternate" href="https://chajing.wang/docs/golang/mysql" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://chajing.wang/docs/golang/mysql" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1fc8377a.css">
<link rel="preload" href="/assets/js/runtime~main.d0e08e93.js" as="script">
<link rel="preload" href="/assets/js/main.da0e05fb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">茶经网</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/leixwang/chajing.wang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">目录说明</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/docs/golang/">Golang 语言</a><button aria-label="Toggle the collapsible sidebar category &#x27;Golang 语言&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/golang/mysql">ORM 框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/redis">Redis 数据库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/session">Session功能实现</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/micro-server">微服务（micro services）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/golang/home">租房网</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ORM 框架</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="orm-框架介绍">ORM 框架介绍<a class="hash-link" href="#orm-框架介绍" title="Direct link to heading">​</a></h2><ul><li>ORM：Object  Relational   Mapping  —— 对象关系映射。</li></ul><p><img alt="1582249051388" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8oAAADnCAYAAADGta9BAAARYUlEQVR4nO3dS7KkuBkGUOioFXjuofe/IA899xbwwEH1X1wJJBAg4JyIjr6VCUJAPvhSD8ZpmqYBAAAAGIZhGP66uwIAAADQE0EZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAAkEZAAAAgl93VwAAcv77z3/98e9//Off2edSy60tsywPgP6M4/j772mabqwJXzNOXnEAdGgOucvQmwrLa4/lwrKQDNDeHGxbRowzyryyfJ5J12sAupMKwKWtxAAAR+l6DQAArIpdoKO5FXb5/LKVNtWFOtetOretrfrk6pJapqTOfJugDMDjrY1lBuCYVIBchsxlSF2GzWmakuuUhNXSZcZxHKZp+lFurNu8TEmd+TZdrwF4vFQXbQDOMwfS3j2hjvRJizIAAJA1t9DmWpHvUtJFG/bSogzAK5jsC+A8cwtybEm+O6gu63R3cOddBGUAACAr1ZrcYr29k3bt2VapVuXwfIIyAN1JtQ6nbhlVsh4Abcwhcm3yq7UJspaTai3L3rvM2gzb89+px0rqzHeNk1cCAJ1am80691xNSDbxFwCQIigDAABAoOs1AAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABIIyAAAABL/urgAAfRvHcRiGYZimqclye9ffW/683tKeetbU4az9AQDOJygDcFgMo3uD6TRNwziOwziOh0Lsnm23JgRDG2vva+A9evy+FJQBOKS05fTMbSyf2xNUU/U8Gtjj3z1eBAAAaYIywEe1aIEtaUlePl8advfUZ207peF5btlerpcqa628+XEtYgDwPIIywEelAt4c6krC4XKZrRbdtcBYGyZrx/226Aod9zm1/7m65P7dsm7wBV98j+iV0ifnpY3ef0gWlAH4oaQbc67FdE/wWwvtrVq3r76YWR6fM8I7AHAOQRngw1ItpEdnrc79+2wtwnZc56jefykHAPIEZYAPizNNRzUBM9e9+s6W0lw9SsdJtwi5xigDwHMJygAfl2pNzgXonNT45Xibp63ux6Vlp+q+Vo/U8kduQXWU7tYA8AyCMgC7pYJpze2R1gJjTajcmnwst85W2bl9Wf6daoXOjZOu+QECALiHoAzwcanQNwxlXYfXul0f6Yadq1NJPVLl7GnJXluvNPQLxADwTH/dXQEA+rBnTO3cOhoDZGnr6llyLbapeubW33r8SJfxtW0DAH0QlAE+7OiY2Tn0xYCcu79y7XjnGCj3rJuqa0lZLUKsscgA8GyCMsBHpcLc3tbOrdba0pCaq9PedZfWyor1Xu5DTXgXkgHg+YxRBviomomsSp7fCpDLFuea20qtrRvXLx1XXTPzdS68p8pI3Zc6Vx4A0K9x8pM3ABl7W0dL19sz4VfpOi1adrfK2Pu8Vmco08u92e/y9f3vlfPSRu/HUYsyAFlHxi6fVf6ZZdeWsff5Hi8I6IMfUc611uMFIBKUAQA6UHtbNOoth2fU3qfdOYHvMJkXHLC8NQ4A7JXqou/75X7CMXyToAw7ldyPFQBqpL5PBGaA6+l6nWD8CgBwl9zs7cYvX8cPE4CgvLB125Irtr3cPgDwPQLzPe68FgT6cUnX67d2GWq9X1d84V15Lno7773VBwBKbN1+DID2tCgX8IstAHAnrcsA1zo1KG99mC+fn6ap+NfR3GQXJcttlTu3PJb+gru2X2uP5eq8tb1cubllSupcY2sMd+15T5VTcwxTZZ617wBwJ4EZ3qF0TqS1a9xcOTXX3CXlfNU4XXAE1j6818aB5AJSyTpb2y2t89r6rfar1TJb623VuUTNcd7a1tZ53Xuez9r3s8oCgL3ePgHpWfO31FzD3TmHTMttlzaupJataeT5Qvg6el5aXePWljM/vrec1nqfn+n220MtT9DaSZkfK/2V5Gi9rthOS3e9wI7eHime19pyUq+XK27X9LTXBgDvtPZjdPyP/1sej9Txid/xuZb7J1q+VnLXuqnbX+YCTerv1DX9E6+rr7a8fj3jGvfINfcXvW6Mcus3X0lX7Cv08qESj8fycZ6nl9cVAFyh9Hrl7dc1a/tXO0SQer1eTzvff+oiKC9fLC1+Kdmr1y61PdUn1T3n7h8SAIA839PUaBmYhK+0Hq+nfUb86fKu10e6AJV0z261rVpb29o7adeebZXaU87ebbeoc+lkBSXb0hUNgK/xvUeJVNfrI2LXa11+/6/kOnTvNW4rrpUvmsxrGLYHa5dMqhAdWa60niXlrO1XyaQJe5fJPRcH6JfU647jU1NG6cQTpV1XzpgUwwc+AD0ouSaYH3+K3if7OVvr/a+dMCq3/dQya3+vbf+JWk3mtVRyLVySN1pdc599nnp/f18WlLeUBOVOqgq/9f4GB+AbzvyR/E5PrXcrZ/zAH8tbm8gsJffjS82ybziPX39dttL7cbx9jHJpS/P8d48Hke/yegTgbiW9qnxfUfO6KJ3sa8824SluD8pbbyBvMACAtN5mzQV4i9uDMgAAdd7apRWgF5fPeg0AwH5CMsD5BGUAgIcQkgGuISgDADyAkAxwHWOUAQA6Z9IugGtpUQYA6JiQDHA9LcoAAJ0Skn9KdUH/gq/ud++clzbGcezu802LMgBAh4RkgPsIygAAnRGSAe6l6zUAQCfMbL3tS8cjvh6+tN+9c17a6P04CsoH5cYl3Hmye3/RAQBlfI8D3ENQPmj+ApvDackXmiALAGxxjQBwH0H5BtM0nTpDXssv1pofAACAY3zfAvTBZF4AAAAQaFG+yFX3WNuaJXOtHnHZ5XJalgEAgK/QonyBGDLn/86yVf7yubj8cux0XPbsegMAAPRCUP4wwRcAAOAnQRkAAAACQRkAAAACk3nd4KqJvVozoRcA8FZb1znLuVyAd9OifNA4jn98cC7/PQzDH5Nl5WaTvqo+qb9zzw/D8GOiL18MAMCbpK7PUssMw8/rIuC9tCgfVBocrwqYW9tJPb9nHQCAN9gKv8uQPE3T73DtGgneS1AGAADoTIvhAIYM7KfrNQAAfMRWV/P5+Su6l1+5rSdpNRzAkIFjBGUAAHi5FoFUsL3GNE2rrb+p4QDx8dJlWKfrNQAAvFxpUFoLaPP47NZ1gh5pUQYAAIBAizIAAJC9TejWsqnltsqq2RbcQYsyAABkLLssb81E/GRbY2NTyw/Dz9Abj1FumdptwdUEZQAAPms5OVVqsqpl2BPw1ieJWgvI8BS6Xh+Q6nKiG8lP7t8GAPSq9NrENUwdAZmn06J8QPzATP3C6AMVAICvSXW9pp2S4QBfGjJwFkGZVS3ulTd/SHpjAgC8Q2kA07Jcr9VwAEMGjtH1uqFxHL0AAQDoztqEWzXLlDw/3285VV7JBGBf13I4gOO5n6B8kbWxyzU3fk8tu+cNkNtm6YdXaZ1rbw2wZ1kfAAAA61qFqlYhzvUbvdP1upG1ALk1RX5uXPPa2IIjswnmylnuz7Iua/9e1n1tubV1cvuVG+viQxYAAGhNi/IFalqP73I0cC5vEXBHHQAAAFoQlC/SMiC3mFxrbVKAHqXq3HN9AQCA5xKUG5rD3FLt+N6S7RyVGv/b82RkJngAAACuIihfrHXX6z0Bcm/ovDOsPrEVHAAAeKZxkjR2q7mf2dqMzaXhObfs3sBbWk6qu3NpGbWza6f2MT6WOqZewgDwTl8fcvX1/e+V89JG78dRi/IBuRO6dsPvmnKOLtuqjNr9qVnuSNkAAABnEJR5BF2vAQCAqwjKPIZQDAAAXOGvuysAAAAAPRGUAQAAIDDrNQAAXWp9W02gX73FUi3KAAAAEAjKAAAAEJj1GgCA7vXWLfMKsev5F/e/V85LG70fR0G5gdz4mR5PeI3eX7wAAABnEJQPmsNkDJImngAAAHguQZmslq3IqR8UAAAAeiQon0AYBAAAeC5B+aBpmoZxHIdxHDcD8rJL9nL5VJfteZmt7txbXb9rw/ueupbURcsyAADQO7eHaiCG2VyAjAExFX6Xzy+XiY8tt7u2ndKgndqntTCbqktqW8tytsoFAAC4mxblRpZhOdWqugyMLbbXQ+jsoQ4AAACtaFFubG8LbmtzYL+7HgAAAE+jRfmgXsfc9lYfAACAp9CifIHcmOSrWnt7a1nurT4AAADROGl6PCQX+NYm2sots2fW65Lt5JZbs7W91L7U7J+XHQCw5evXDl/f/145L230fhx1vT6o5qRuLVszy3SrOu0tI/X8kf0DAADoha7XAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEAjKAAAAEPw6q+BxHH//PU3TWZsBAACApk5rUZ6m6XdAjqEZAAAAeqbrNQAAAASCMgAAAASCMgAAAASCMgAAAASCMgAAAASnB2UzXwMAAPAkpwflOSC7lzIAAABPoOs1AAAABIIyAAAABIIyAAAABIIyAAAABL/OKjjOcm0iLwAAAJ7itKAsHAMAAPBEul4DAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABAICgDAABA8OvuCgAAAD9N03R3FeCztCgDAABAICgDAABAICgDAABAYIwyAABAIWPHv0GLMgAAAASCMgAAAASCMgAAAASCMgAAAAQm8wIeZxzHYRiOTabRogwArjN/bgNcQVCGF4sXFb0GwhhYrwqvXwnJuWP7hNcFAMCdBGV4qSeEwa2QvNV6kHt+bZ+fcFxaWDu28//HcRzGcXz9sQAAqCUoX2jPRT31HOcyW4Gxh1bH1HaX57ekbqnXxFoIv7tFu+TY93B+AM7m8w24i6B8kT2tZa23vdz+GznO20qOx7I18oxWxz1drnOBt7Rue8pvqdWx31rmju7sAABvYtbr4e/uh71oXZ8rLpB7O4Ylvnqcp2mq6pocu+m2FOuxVadUvc6s21laHPuSZWqPLQAAf9KifCMXr387sxus4/xsWy31sVU1twwAANRoEpS3WnPWusHWdJGtvQDeGqu6fH55oZ26QN/bvbakC2vL+tR08VzWc2v9te3sDSutwo3j/B4177Xl5FQl6wAAQM44NbqazIWN3Li53DLx8fm5PRe+Jdvfery2nJp6ra1/tD6tl9lab6vOd/j6cS5ZrmYbPZzfIz+k1XbNvmsyr1avqRZ1AQD4sku7Xte2xC3H4LXc/l2WLV891GnLVWNvW27/68f5zEm47lL6g0ZtGanyvkJIBgBIaxaUl+ME58eWrroQTdUnV6c79BJkegkGZx0Dx/m9hDwAAM5yaYvyWpfTM6S6Nd4VmHq9qO+tPkc5ztfZO15/T/l7lmtdp7P3FwCAfjQNyjXjic8OyXsD09Z6V7cMtqhPbeA4GgJ6DatrHOe/LVvh7zqfe8ZXP13Jse/l/AAAvFmzybx+F7gzcMQLvtRze+tRWtZaa1GL8bNX12fvMrnnUudnaxK2OzjOP5cr3a8927krpNVut9UkaEf394xj36I+QjYAwJ+aB2WgH2f+eHFHyNo750CLWa/fFCp7+FELAKBngjLwKHsCa8vbagEA8H6CMgAAAAR/3V0BAAAA6ImgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAIGgDAAAAMH/AL6mH3zwK5TqAAAAAElFTkSuQmCC"></p><ul><li><p>作用：</p><ul><li>通过操作结构体对象，来达到操作数据库表的目的。</li><li>通过结构体对象，来生成数据库表。</li></ul></li><li><p>优点：</p><ul><li>SQL有可能 比较复杂。（Oracle --- 子查询 -- 嵌套）ORM 操作数据库，不需要使用 SQL</li><li>不同开发者，书写的 SQL 语句执行效率不同。</li></ul></li><li><p>go语言支持的 ORM：</p><ul><li>gORM：<a href="http://gorm.book.jasperxu.com/" target="_blank" rel="noopener noreferrer">http://gorm.book.jasperxu.com/</a></li><li>xORM：</li></ul></li></ul><header><h1>gorm 连接数据库、建表</h1></header><ul><li><p>grom 操作的都是表、表数据。—— 不能操作数据库！使用SQL配合完成。</p><div class="codeBlockContainer_J+bg language-sql theme-code-block"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">database</span><span class="token plain"> 库名 </span><span class="token keyword" style="color:#00009f">charset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utf8</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="回顾mysql">回顾MySQL<a class="hash-link" href="#回顾mysql" title="Direct link to heading">​</a></h2><ol><li>确认mysql服务，启动：<code> ps xua | grep mysql</code></li><li>连接MySQL数据库： mysql -uroot -p123456</li><li>查看数据库：show databases;</li><li>删除数据库：drop database t1;    t1 代表库名。</li><li>选择数据库、查看表：use 数据库名；     show tables；</li><li>创建数据库： create database test charset=utf8;</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-操作-mysql-数据库">gORM 操作 MySQL 数据库<a class="hash-link" href="#gorm-操作-mysql-数据库" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="创建表">创建表<a class="hash-link" href="#创建表" title="Direct link to heading">​</a></h3><ol><li><p>连接数据库</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/jinzhu/gorm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/go-sql-driver/mysql&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//&quot;_&quot; 代码不直接使用包, 底层链接要使用!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// mysql: 数据库的驱动名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 链接数据库 --格式: 用户名:密码@协议(IP:port)/数据库名？xxx&amp;yyy&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;gorm.Open err:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>创建数据库表。 ——不能使用gorm创建数据库。  提前使用 SQL语句，创建好想要的数据库。</p><p>AutoMigrate()  创建表。默认创建的表 为 复数类型。—— 自动添加 “s” </p><p>在创建之前， 添加 <code>	conn.SingularTable(true)</code> 可以创建非复数表名的表。</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 不要复数表名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 借助 gorm 创建数据库表.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>查看</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> desc student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Field </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Type         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Null </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Default </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Extra          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NO   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> PRI </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> auto_increment </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> YES  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> YES  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------+------+-----+---------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-包的-init-方法">MySQL 包的 init 方法<a class="hash-link" href="#mysql-包的-init-方法" title="Direct link to heading">​</a></h3><ol><li><p><code>_ &quot;github.com/go-sql-driver/mysql&quot;</code> 导入包时， “_” ,表示，驱使go系统，在main() 函数被调用之前，自动调用 init() 函数。</p></li><li><p>go语言中有两个特殊函数：  —— 首字母小写，包外可见 。</p><ol><li>main()   —— 项目的入口函数 </li><li>init() —— 当导包，但没有在程序中使用。 在main() 调用之前，自动被调用。<ul><li>查看：光标置于 MySQL包的 “mysql” 上。 使用 Ctrl-鼠标左键。 看到源码。 在 driver.go 底部包含 init() 函数的 定义。</li><li>init() 作用：实现注册 MySQL 驱动。</li></ul></li></ol></li><li><p>测试：</p><p>test2/ 中</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 创建 test2</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> 目录， 在内部添加 </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> test2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 首字母小写函数, 包作用域, 不能跨包使用!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;测试 init 函数 ....&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>test/ 中</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/jinzhu/gorm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bj38web/web/test2&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//&quot;_&quot; 代码不直接使用包, 底层链接要使用!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;----this is main ---&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出： 测试 init 函数 </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">再输出：</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain">this is main </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p>运行结果： init 函数 会先于 main() 函数被调用！！！</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="gorm的连接池">gorm的连接池<a class="hash-link" href="#gorm的连接池" title="Direct link to heading">​</a></h3><ol><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token plain"> 默认， grom框架创建好的MySQL数据库连接 conn ，就是一个连接池的句柄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>初始化全局变量， 接收句柄</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建全局连接池句柄</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> GlobalConn </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>修改连接池初始属性</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 初始数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxIdleConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 最大数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxOpenConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>使用连接池句柄</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 对比redis连接池：不需要使用 </span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 方法，取一条连接。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 不要复数表名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 借助 gorm 创建数据库表.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><header><h1>gorm 操作数据库数据</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-插入数据">gorm 插入数据<a class="hash-link" href="#gorm-插入数据" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// insert into student(name, age) values(&#x27;zhangsan&#x27;, 100)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InsertData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 先创建数据 --- 创建对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhangsan&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 插入(创建)数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>使用注意事项：</p><ul><li>插入数据时，使用的 create() 函数，传参时，必须传入 &amp;对象。 如果遗漏 “&amp;” 会报错：</li></ul><p><img alt="1582255572530" src="/assets/images/1582255572530-196a220afa29b54aed5bcd2b51c3bf4b.png"></p><ul><li>要保证 ，在插入数据库时，<code>GlobalConn.SingularTable(true)</code> 生效。代表不使用 复数表名。</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-查询数据">gorm 查询数据<a class="hash-link" href="#gorm-查询数据" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="简单查询方法">简单查询方法：<a class="hash-link" href="#简单查询方法" title="Direct link to heading">​</a></h3><ol><li><p>First(&amp;suer):</p><ul><li><p>获取 user 表中的第一条数据</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SearchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">First</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>相当于SQL：<code> SELECT * FROM student ORDER BY id LIMIT 1;</code></p></li><li><p>只查询 name、age 不查询其他值：</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">First</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li><p>Last(&amp;user)</p><ul><li>获取 user 表中的最后一条数据</li><li>相当于SQL：<code> SELECT * FROM users ORDER BY id DESC LIMIT 1</code></li></ul></li><li><p>Find(&amp;user)</p><ul><li><p>获取 user 表中的所有数据。</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Student       </span><span class="token comment" style="color:#999988;font-style:italic">// 改为切片</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Find() 查询多条</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>相当于SQL：<code>select name, age from student;</code></p></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="where-子句使用">where 子句使用<a class="hash-link" href="#where-子句使用" title="Direct link to heading">​</a></h3><ul><li><p>select name, age from student where name = ‘lisi’;</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">或：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>select name, age from student where name = ‘lisi’ and age = 22; </p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//方法1：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;age = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//方法2：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name, age&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ? and age = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-更新数据">gorm 更新数据<a class="hash-link" href="#gorm-更新数据" title="Direct link to heading">​</a></h2><ol><li>Save(): 根据主键更新。 如果数据没有指定主键，不更新 ，变为 “插入”操作。</li><li>Update(): 更新一个字段。</li><li>Updates(): 更新多个字段。</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="save">save<a class="hash-link" href="#save" title="Direct link to heading">​</a></h3><ul><li><p>插入：</p><ul><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wangwu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 没有指定 id -- 没有主键! --- 插入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>select * from student;</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> zhangsan </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li><p>更新：</p><ul><li><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wangwu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">77</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//指定 id -- 更新操作!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>查询：</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from student</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> zhangsan </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">77</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lisi     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> wangwu   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+----------+------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> rows </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update">update<a class="hash-link" href="#update" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhaoliu&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 指定更新 “student” 表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zhaoliu&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">： 指定过滤条件。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">：指定 把 “zhaoliu” 更新成 “lisi”    </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="updates">updates<a class="hash-link" href="#updates" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Updates</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;liuqi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;age&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">77</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="grom-删除数据">grom 删除数据<a class="hash-link" href="#grom-删除数据" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="删除">删除<a class="hash-link" href="#删除" title="Direct link to heading">​</a></h3><ul><li>物理删除。真正的执行 Delete。</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="软删除">软删除<a class="hash-link" href="#软删除" title="Direct link to heading">​</a></h3><ul><li><p>逻辑删除。不真正删。不执行Delete。 —— 数据无价的！</p><ul><li>创建表时，在表中添加一个 “删除字段” 。当需要删除时，更新 “删除字段”， 更新为 ：true</li><li>查询时，不查询 “删除字段” 为 null 的值。</li><li>举例：淘宝，删除订单。 手机，删除图片。</li></ul></li><li><p>实现 软删除：</p><ul><li><p>创建表：</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建全局结构体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Model      </span><span class="token comment" style="color:#999988;font-style:italic">// go语言中, 匿名成员 --- 继承! Student 继承 Model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 在 “Model” 上，Ctrl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">B 跳转至 Model 类定义。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Model </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ID        </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:&quot;primary_key&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UpdatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DeletedAt </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token string" style="color:#e3116c">`sql:&quot;index&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> Model 表由 mysql自动维护，不需要我们手动维护。</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>执行软删除：</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 使用 </span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 参数，指定要删除的数据所在表的表名。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>验证：</p><ol><li><p>select * from student；  依然能看到 “lisi” 相关数据。 但是 。delete_at 字段。被填入数据。</p></li><li><p>在 gorm 框架中，执行 查询语句：</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SearchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stu </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 查询结果为： </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;软删除&quot;</span><span class="token plain"> 成功！</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></li><li><p>想 查询 “软删除”的数据：</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stu</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>想 实现 “物理删除”</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 借助 </span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 执行删除。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unscoped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lisi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mysql-8小时-时区问题">MySQL 8小时 时区问题<a class="hash-link" href="#mysql-8小时-时区问题" title="Direct link to heading">​</a></h3><ul><li><p>MySQL默认使用的时间 ： 美国 东 8 区 时间 。 —— 北京时间 —— 差 8 小时。</p></li><li><p>在连接数据库时，添加属性：<code>?parseTime=True&amp;loc=Local</code> </p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql,                &quot;</span><span class="token plain">root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">123456</span><span class="token plain">@</span><span class="token function" style="color:#d73a49">tcp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">127.0</span><span class="token number" style="color:#36acaa">.0</span><span class="token number" style="color:#36acaa">.1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3306</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">test?parseTime</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">True</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">loc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Local&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>再执行SQL语句、gorm访问MySQL 使用 北京时间。</p></li></ul><header><h1>gorm 设置表属性</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="修改表字段大小">修改表字段大小<a class="hash-link" href="#修改表字段大小" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建全局结构体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain">     </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:50&quot;`</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// string -- varchar。 默认大小255.  可以在创建表时，指定大小。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>结论：修改表属性，只能在第一次建表的时候，有效！或者给表增加新字段的时候，有效！其他场景，修改表属性 ，在 gorm 操作中，无效！</li></ul><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建全局结构体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:100;default:&#x27;xiaoming&#x27;&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age   </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:&quot;not null&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="设置时间">设置时间<a class="hash-link" href="#设置时间" title="Direct link to heading">​</a></h2><ul><li><p>默认MySQL数据库 有 3 种时间：</p><ul><li>date：</li><li>datetime：</li><li>timeStamp：时间戳。 ——  gorm 中，只有 timeStamp</li></ul></li><li><p>如果必须使用 MySQL 数据库特有的 “数据类型”， 使用 “type” 关键字来设置。</p></li></ul><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建全局结构体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Student </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:&quot;size:100;default:&#x27;xiaoming&#x27;&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Age   </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class </span><span class="token builtin">int</span><span class="token plain">       </span><span class="token string" style="color:#e3116c">`gorm:&quot;not null&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Join  time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token string" style="color:#e3116c">`gorm:&quot;type:timestamp&quot;`</span><span class="token comment" style="color:#999988;font-style:italic">// 创建 Student 表指定 timestamp类型。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>项目中使用表 的创建</h1></header><ol><li><p>在 项目的 web/model/ 下 创建  model.go 文件。</p></li><li><p>参照讲义《微服务项目讲义1.md》中 2.2.2 小节，将创建表的代码 添加到  model.go 。</p></li><li><p>使用 SQL语句创建 数据库 search_house。修改 InitDb() 函数。同时，指定MySQL使用的时间。初始化全局连接池句柄。</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 创建 数据库链接句柄</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> GlobalConn </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InitDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> gorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;root:123456@tcp(127.0.0.1:3306)/search_house?parseTime=True&amp;loc=Local&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 初始化 全局连接池句柄</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMaxIdleConns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GlobalConn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetConnMaxLifetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SingularTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AutoMigrate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">House</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Area</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Facility</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HouseImage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OrderHouse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>将  InitDb()  在 web/main.go 中 调用！</p><div class="codeBlockContainer_J+bg language-go theme-code-block"><div class="codeBlockContent_csEI go"><pre tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 初始化 MySQL 链接池</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">InitDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>运行 web/main.go , 创建 项目中需要使用的表</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gorm-连接数据库">gORM 连接数据库<a class="hash-link" href="#gorm-连接数据库" title="Direct link to heading">​</a></h2><table><thead><tr><th>字段名</th><th>数据类型</th></tr></thead><tbody><tr><td>id</td><td>int</td></tr><tr><td>username</td><td>char</td></tr><tr><td>password</td><td>char</td></tr><tr><td>gender</td><td>int</td></tr><tr><td>birthday</td><td>int</td></tr><tr><td>register_time</td><td>int</td></tr><tr><td>last_login_time</td><td>int</td></tr><tr><td>last_login_ip</td><td>char</td></tr><tr><td>user_level_id</td><td>int</td></tr><tr><td>nickname</td><td>char</td></tr><tr><td>mobile</td><td>char</td></tr><tr><td>register_ip</td><td>char</td></tr><tr><td>avatar</td><td>char</td></tr><tr><td>weixin_openid</td><td>char</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/golang/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Golang 语言</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/golang/redis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis 数据库</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#orm-框架介绍" class="table-of-contents__link toc-highlight">ORM 框架介绍</a></li><li><a href="#回顾mysql" class="table-of-contents__link toc-highlight">回顾MySQL</a></li><li><a href="#gorm-操作-mysql-数据库" class="table-of-contents__link toc-highlight">gORM 操作 MySQL 数据库</a><ul><li><a href="#创建表" class="table-of-contents__link toc-highlight">创建表</a></li><li><a href="#mysql-包的-init-方法" class="table-of-contents__link toc-highlight">MySQL 包的 init 方法</a></li><li><a href="#gorm的连接池" class="table-of-contents__link toc-highlight">gorm的连接池</a></li></ul></li><li><a href="#gorm-插入数据" class="table-of-contents__link toc-highlight">gorm 插入数据</a></li><li><a href="#gorm-查询数据" class="table-of-contents__link toc-highlight">gorm 查询数据</a><ul><li><a href="#简单查询方法" class="table-of-contents__link toc-highlight">简单查询方法：</a></li><li><a href="#where-子句使用" class="table-of-contents__link toc-highlight">where 子句使用</a></li></ul></li><li><a href="#gorm-更新数据" class="table-of-contents__link toc-highlight">gorm 更新数据</a><ul><li><a href="#save" class="table-of-contents__link toc-highlight">save</a></li><li><a href="#update" class="table-of-contents__link toc-highlight">update</a></li><li><a href="#updates" class="table-of-contents__link toc-highlight">updates</a></li></ul></li><li><a href="#grom-删除数据" class="table-of-contents__link toc-highlight">grom 删除数据</a><ul><li><a href="#删除" class="table-of-contents__link toc-highlight">删除</a></li><li><a href="#软删除" class="table-of-contents__link toc-highlight">软删除</a></li><li><a href="#mysql-8小时-时区问题" class="table-of-contents__link toc-highlight">MySQL 8小时 时区问题</a></li></ul></li><li><a href="#修改表字段大小" class="table-of-contents__link toc-highlight">修改表字段大小</a></li><li><a href="#设置时间" class="table-of-contents__link toc-highlight">设置时间</a></li><li><a href="#gorm-连接数据库" class="table-of-contents__link toc-highlight">gORM 连接数据库</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Leix.Wang, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d0e08e93.js"></script>
<script src="/assets/js/main.da0e05fb.js"></script>
</body>
</html>